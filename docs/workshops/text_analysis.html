<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.43">

  <title>text_analysis</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #97947a;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #97947a;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2; background-color: #2b2b2b; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #dcc6e0; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #ffd700; } /* Attribute */
    code span.bn { color: #dcc6e0; } /* BaseN */
    code span.bu { color: #f5ab35; } /* BuiltIn */
    code span.cf { color: #ffa07a; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffa07a; } /* Constant */
    code span.co { color: #d4d0ab; } /* Comment */
    code span.cv { color: #d4d0ab; font-style: italic; } /* CommentVar */
    code span.do { color: #d4d0ab; font-style: italic; } /* Documentation */
    code span.dt { color: #dcc6e0; } /* DataType */
    code span.dv { color: #dcc6e0; } /* DecVal */
    code span.er { color: #dcc6e0; } /* Error */
    code span.ex { color: #ffd700; } /* Extension */
    code span.fl { color: #f5ab35; } /* Float */
    code span.fu { color: #ffd700; } /* Function */
    code span.im { color: #f8f8f2; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; } /* Keyword */
    code span.op { color: #00e0e0; } /* Operator */
    code span.ot { color: #ffa07a; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.sc { color: #00e0e0; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #f5ab35; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #d4d0ab; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="title-slide" class="slide level2 center" data-menu-title="Introduction to Text Analysis in R" data-background-image="images/rainier_night.jpeg" data-background-size="cover">
<h2></h2>
<p><span class="custom-title">Introduction to <br> Text Analysis in R</span></p>
<p><span class="custom-subtitle">CSSCR Workshop</span></p>
<p><span class="custom-subtitle2">30 January 2025</span></p>
<p><span class="custom-subtitle3">Victoria Sass</span></p>
</section>
<section id="roadmap" class="slide level2">
<h2>Roadmap</h2>
<div>
<ul>
<li class="fragment">Text as Tidy Data</li>
<li class="fragment">Sentiment Analysis</li>
<li class="fragment">tf-idf</li>
<li class="fragment">Word Embeddings</li>
<li class="fragment">Topic Modeling</li>
<li class="fragment">Further Learning &amp; Resources</li>
</ul>
</div>
</section>
<section>
<section id="source-material" class="title-slide slide level1 center" data-background-color="#c5b4e3">
<h1>Source Material</h1>

</section>
<section id="section" class="slide level2" data-background-iframe="https://www.tidytextmining.com/">
<h2></h2>
<p><a href="https://www.tidytextmining.com/" style="border: 2px solid #4B2E83; color: #2ad2c9; border-radius: 15px; padding: 5px 5px 5px 5px; position: absolute; top: 300px; right: -50px; text-align: center;">Go to book site</a></p>
</section>
<section id="section-1" class="slide level2" data-background-iframe="https://smltar.com/">
<h2></h2>
<p><a href="https://smltar.com/" style="border: 2px solid #4B2E83; color: #e93cac; padding: 5px 5px 5px 5px; border-radius: 15px; position: absolute; top: 300px; right: -50px; text-align: center">Go to book site</a></p>
</section></section>
<section>
<section id="text-as-tidy-data" class="title-slide slide level1 center" data-background-color="#c5b4e3">
<h1>Text as Tidy Data</h1>

</section>
<section id="the-tidyverse" class="slide level2">
<h2>The <code>tidyverse</code></h2>
<p><br></p>
<p>The <code>tidyverse</code> refers to two things:</p>
<div>
<ol type="1">
<li class="fragment">a specific package in <code>R</code> that loads several core packages within the <code>tidyverse</code>.<br>
</li>
<li class="fragment">a specific design philosophy, grammar, and focus on “tidy” data structures developed by Hadley Wickham <sup>1</sup> and the team at <a href="https://posit.co/">Posit</a> (formerly known as R Studio).</li>
</ol>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>You can read the official manifesto <a href="https://tidyverse.tidyverse.org/articles/manifesto.html">here</a>.</p></li></ol></aside></section>
<section id="the-tidyverse-package" class="slide level2">
<h2>The <code>tidyverse</code> package</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>The core packages within the <code>tidyverse</code> include:</p>
<div>
<ul>
<li class="fragment"><code>ggplot2</code> (visualizations)</li>
<li class="fragment"><code>dplyr</code> (data manipulation)</li>
<li class="fragment"><code>tidyr</code> (data reshaping)</li>
<li class="fragment"><code>readr</code> (data import/export)</li>
<li class="fragment"><code>purrr</code> (iteration)</li>
<li class="fragment"><code>tibble</code> (modern dataframe)</li>
<li class="fragment"><code>stringr</code> (text data)</li>
<li class="fragment"><code>forcats</code> (factors)</li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<p><img data-src="images/tidyverse.png"></p>
</div>
</div>
</section>
<section id="the-tidyverse-philosophy" class="slide level2">
<h2>The <code>tidyverse</code> philosophy</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>The principles underlying the tidyverse are:</p>
<div>
<ol type="1">
<li class="fragment">Reuse existing data structures.</li>
<li class="fragment">Compose simple functions with the pipe.</li>
<li class="fragment">Embrace functional programming.</li>
<li class="fragment">Design for humans.</li>
</ol>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="images/extended_tidyverse.jpeg"></p>
</div>
</div>
</section>
<section id="section-2" class="slide level2" data-background-image="https://r4ds.hadley.nz/diagrams/data-science/whole-game.png" data-background-size="contain">
<h2></h2>
</section>
<section id="what-is-tidy-data" class="slide level2">
<h2>What is Tidy Data?</h2>
<p><img data-src="images/tidy_data1.jpg" style="width:90.0%"> <sup>1</sup></p>
<aside><ol class="aside-footnotes"><li id="fn2"><p>Illustrations from the <a href="https://openscapes.org/">Openscapes</a> blog <a href="https://www.openscapes.org/blog/2020/10/12/tidy-data/">Tidy Data for reproducibility, efficiency, and collaboration</a> by Julia Lowndes and Allison Horst</p></li></ol></aside></section>
<section id="why-do-we-want-tidy-data" class="slide level2">
<h2>Why do we Want Tidy Data?</h2>
<div class="small1">
<ul>
<li class="fragment"><strong>Easier to understand</strong> many rows than many columns<sup>1</sup></li>
<li class="fragment">Required for <strong>plotting</strong> in <code>ggplot2</code><sup>2</sup></li>
<li class="fragment">Required for many types of <strong>statistical procedures</strong> (e.g.&nbsp;hierarchical or mixed effects models)</li>
<li class="fragment">Fewer issues with <strong>missing values and “imbalanced”</strong> repeated measures data</li>
<li class="fragment">Having a consistent method for storing data means it’s easier to learn the tools to work with it since there’s an underlying uniformity.</li>
</ul>
</div>
<div class="fragment">
<div class="small1">
<p>Most real-world data is not tidy because data are often organized for goals other than analysis (i.e.&nbsp;data entry; not intentionally created as data…) and most people aren’t familiar with the principles of tidy data.</p>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn3"><p>Placing variables in columns also leverages <code>R</code>’s vectorized nature, i.e.&nbsp;most built-in <code>R</code> functions work with values of vectors.</p></li><li id="fn4"><p>In fact, all <code>tidyverse</code> functions are designed to work with tidy data.</p></li></ol></aside></section>
<section id="why-do-we-want-tidy-data-1" class="slide level2">
<h2>Why do we Want Tidy Data?</h2>
<p><img data-src="images/tidy_data3.jpg" style="width:90.0%"> <sup>1</sup></p>
<aside><ol class="aside-footnotes"><li id="fn5"><p>Illustrations from the <a href="https://openscapes.org/">Openscapes</a> blog <a href="https://www.openscapes.org/blog/2020/10/12/tidy-data/">Tidy Data for reproducibility, efficiency, and collaboration</a> by Julia Lowndes and Allison Horst</p></li></ol></aside></section>
<section id="section-3" class="slide level2" data-background-color="#fcdd60" data-background-image="https://www.bubbleblabber.com/wp-content/uploads/2015/06/bobs-burgers-title.jpg" data-background-size="75%">
<h2></h2>
</section>
<section id="data-from-bobsburgersr" class="slide level2">
<h2>Data from <a href="https://github.com/poncest/bobsburgersR"><code>bobsburgersR</code></a></h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-30"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-30" data-target-annotation="1">1</button><span id="annotated-cell-30-1" class="code-annotation-target"><a href="#annotated-cell-30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"pak"</span>)</span>
<span id="annotated-cell-30-2"><a href="#annotated-cell-30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pak</span>(<span class="st">"poncest/bobsburgersR"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-30" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-30" data-code-lines="1,2" data-code-annotation="1">Run these two lines of code in your <span style="color:#e93cac">console</span>.</span>
</dd>
</dl>
</div>
</div>
</div>
<div class="fragment small1">
<p>The <code>pak</code> package is an alternative to using <code>install.packages()</code> and, for our purposes here, allows us to download our data directly from Github.</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bobsburgersR)</span>
<span id="cb1-3"><a aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(transcript_data, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 10 × 6
#&gt;    season episode title        line raw_text                            dialogue
#&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                               &lt;chr&gt;   
#&gt;  1      1       1 Human Flesh     1 &lt;NA&gt;                                &lt;NA&gt;    
#&gt;  2      1       1 Human Flesh     2 &lt;NA&gt;                                &lt;NA&gt;    
#&gt;  3      1       1 Human Flesh     3 &lt;NA&gt;                                &lt;NA&gt;    
#&gt;  4      1       1 Human Flesh     4 Listen, pep talk.                   Listen,…
#&gt;  5      1       1 Human Flesh     5 Big day today.                      Big day…
#&gt;  6      1       1 Human Flesh     6 It's our grand re-re-re-opening.    It's ou…
#&gt;  7      1       1 Human Flesh     7 It's labor day weekend, And it loo… It's la…
#&gt;  8      1       1 Human Flesh     8 So we have to-- Big day for anothe… So we h…
#&gt;  9      1       1 Human Flesh     9 Go ahead, sorry.                    Go ahea…
#&gt; 10      1       1 Human Flesh    10 Go ahead, do your pep.              Go ahea…</code></pre>
</div>
</div>
</div>
</section>
<section id="first-steps" class="slide level2">
<h2>First steps</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-1-1"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext) </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2">2</button><span id="annotated-cell-1-2" class="code-annotation-target"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textclean)</span>
<span id="annotated-cell-1-3"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="3">3</button><span id="annotated-cell-1-4" class="code-annotation-target"><a href="#annotated-cell-1-4" aria-hidden="true" tabindex="-1"></a>clean_text <span class="ot">&lt;-</span> <span class="cf">function</span>(text) {</span>
<span id="annotated-cell-1-5"><a href="#annotated-cell-1-5" aria-hidden="true" tabindex="-1"></a>  text <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="4">4</button><span id="annotated-cell-1-6" class="code-annotation-target"><a href="#annotated-cell-1-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">replace_html</span>() <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="5">5</button><span id="annotated-cell-1-7" class="code-annotation-target"><a href="#annotated-cell-1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">replace_non_ascii</span>() <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="6">6</button><span id="annotated-cell-1-8" class="code-annotation-target"><a href="#annotated-cell-1-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">replace_contraction</span>() <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="7">7</button><span id="annotated-cell-1-9" class="code-annotation-target"><a href="#annotated-cell-1-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">replace_white</span>() <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="8">8</button><span id="annotated-cell-1-10" class="code-annotation-target"><a href="#annotated-cell-1-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tolower</span>() <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="9">9</button><span id="annotated-cell-1-11" class="code-annotation-target"><a href="#annotated-cell-1-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove_all</span>(<span class="at">pattern =</span> <span class="st">"[:punct:]|[:symbol:]"</span>)</span>
<span id="annotated-cell-1-12"><a href="#annotated-cell-1-12" aria-hidden="true" tabindex="-1"></a>}</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="2" data-code-annotation="2">You can optionally run <code>check_text()</code> on your raw text variable to receive a print-out of possible functions you may want to use to clean your raw text data.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="4" data-code-annotation="3">Creating our own helper function to clean our raw text variable</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="6" data-code-annotation="4">Removes any HTML tags</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="7" data-code-annotation="5">Removes non_ASCII characters</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="8" data-code-annotation="6">Expands contractions to avoid repetition</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="9" data-code-annotation="7">Collapses multiple spaces</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="10" data-code-annotation="8">Normalizes all lower case</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="9">9</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="11" data-code-annotation="9">Removes all punctuation/symbols</span>
</dd>
</dl>
</div>
</div>
</div>
</section>
<section id="cleaning-the-data" class="slide level2">
<h2>Cleaning the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-2-1"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a>clean_bob <span class="ot">&lt;-</span> transcript_data <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="10">10</button><span id="annotated-cell-2-2" class="code-annotation-target"><a href="#annotated-cell-2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span></span>
<span id="annotated-cell-2-3"><a href="#annotated-cell-2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cleaned_text =</span> raw_text <span class="sc">|&gt;</span> <span class="fu">clean_text</span>()) </span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="10">10</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="2" data-code-annotation="10">Drops any rows in a dataframe that have <code>NAs</code> in them</span>
</dd>
</dl>
</div>
</div>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment" data-fragment-index="1">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a aria-hidden="true" tabindex="-1"></a>clean_bob <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(raw_text) <span class="sc">|&gt;</span> </span>
<span id="cb3-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">5</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 5 × 1
#&gt;   raw_text                                                                      
#&gt;   &lt;chr&gt;                                                                         
#&gt; 1 Yeah, come, Susmita.                                                          
#&gt; 2 And the heat is off in the restaurant,                                        
#&gt; 3 Whoa! Oh.                                                                     
#&gt; 4 I was gonna give it to you for your birthday  and, uh, surprise you, but it's…
#&gt; 5 It'll be just like at the doctor,  but we've both seen each other naked.</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment" data-fragment-index="1">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a aria-hidden="true" tabindex="-1"></a>clean_bob <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cleaned_text) <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">5</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
</div>
<div class="fragment" data-fragment-index="2">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 5 × 1
#&gt;   cleaned_text                                                                  
#&gt;   &lt;chr&gt;                                                                         
#&gt; 1 yeah come susmita                                                             
#&gt; 2 and the heat is off in the restaurant                                         
#&gt; 3 whoa oh                                                                       
#&gt; 4 i was gonna give it to you for your birthday and uh surprise you but it is in…
#&gt; 5 it will be just like at the doctor but we have both seen each other naked</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tokenization" class="slide level2">
<h2>Tokenization</h2>
<div class="small1">
<ul>
<li class="fragment">In order to create a tidy dataset from lots of text, we need to define a feature that we want to use as our unit of analysis.</li>
<li class="fragment">This could be many different things (i.e.&nbsp;a sentence, a paragraph, an n-gram, etc.) but the most common token is a word.</li>
</ul>
</div>
<div class="fragment">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/tokenization-black-box.png" class="quarto-figure quarto-figure-center" style="width:50.0%"></p>
</figure>
</div>
</div>
</section>
<section id="tidying-the-data" class="slide level2">
<h2>Tidying the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-3"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-3-1"><a href="#annotated-cell-3-1" aria-hidden="true" tabindex="-1"></a>tidy_bob <span class="ot">&lt;-</span> clean_bob <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-3-2"><a href="#annotated-cell-3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(transcript_data <span class="sc">|&gt;</span></span>
<span id="annotated-cell-3-3"><a href="#annotated-cell-3-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(season, episode) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-3-4"><a href="#annotated-cell-3-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">distinct</span>() <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="11">11</button><span id="annotated-cell-3-5" class="code-annotation-target"><a href="#annotated-cell-3-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">episode_seq =</span> <span class="fu">row_number</span>())) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="12">12</button><span id="annotated-cell-3-6" class="code-annotation-target"><a href="#annotated-cell-3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(dialogue, raw_text)) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="13">13</button><span id="annotated-cell-3-7" class="code-annotation-target"><a href="#annotated-cell-3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> cleaned_text)</span>
<span id="annotated-cell-3-8"><a href="#annotated-cell-3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-3-9"><a href="#annotated-cell-3-9" aria-hidden="true" tabindex="-1"></a>tidy_bob</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-3" data-target-annotation="11">11</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="5" data-code-annotation="11">This entire <code>left_join</code> dataset simply creates an episode number that isn’t broken up by season</span>
</dd>
<dt data-target-cell="annotated-cell-3" data-target-annotation="12">12</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="6" data-code-annotation="12">Removes the <code>dialogue</code> and <code>raw_text</code> columns</span>
</dd>
<dt data-target-cell="annotated-cell-3" data-target-annotation="13">13</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="7" data-code-annotation="13">This function tokenizes our data into a tidy format</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,127,930 × 6
#&gt;    season episode title        line episode_seq word  
#&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;       &lt;int&gt; &lt;chr&gt; 
#&gt;  1      1       1 Human Flesh     4           1 listen
#&gt;  2      1       1 Human Flesh     4           1 pep   
#&gt;  3      1       1 Human Flesh     4           1 talk  
#&gt;  4      1       1 Human Flesh     5           1 big   
#&gt;  5      1       1 Human Flesh     5           1 day   
#&gt;  6      1       1 Human Flesh     5           1 today 
#&gt;  7      1       1 Human Flesh     6           1 it    
#&gt;  8      1       1 Human Flesh     6           1 is    
#&gt;  9      1       1 Human Flesh     6           1 our   
#&gt; 10      1       1 Human Flesh     6           1 grand 
#&gt; # ℹ 1,127,920 more rows</code></pre>
</div>
</div>
</section>
<section id="stop-words" class="slide level2">
<h2>Stop Words</h2>
<p>As you might imagine, most words that appear in a corpus of text are going to be fairly boring and (depending on the analysis) not very insightful. These are what’s known as stop words.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(stop_words)</span>
<span id="cb8-2"><a aria-hidden="true" tabindex="-1"></a>stop_words</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,149 × 2
#&gt;    word        lexicon
#&gt;    &lt;chr&gt;       &lt;chr&gt;  
#&gt;  1 a           SMART  
#&gt;  2 a's         SMART  
#&gt;  3 able        SMART  
#&gt;  4 about       SMART  
#&gt;  5 above       SMART  
#&gt;  6 according   SMART  
#&gt;  7 accordingly SMART  
#&gt;  8 across      SMART  
#&gt;  9 actually    SMART  
#&gt; 10 after       SMART  
#&gt; # ℹ 1,139 more rows</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a aria-hidden="true" tabindex="-1"></a>stop_words <span class="sc">|&gt;</span> <span class="fu">count</span>(lexicon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 3 × 2
#&gt;   lexicon      n
#&gt;   &lt;chr&gt;    &lt;int&gt;
#&gt; 1 SMART      571
#&gt; 2 onix       404
#&gt; 3 snowball   174</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="removing-stop-words" class="slide level2">
<h2>Removing Stop Words</h2>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a aria-hidden="true" tabindex="-1"></a>tidy_bob <span class="ot">&lt;-</span> tidy_bob <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words)</span>
<span id="cb12-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a aria-hidden="true" tabindex="-1"></a>tidy_bob</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 355,240 × 6
#&gt;    season episode title        line episode_seq word         
#&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;       &lt;int&gt; &lt;chr&gt;        
#&gt;  1      1       1 Human Flesh     4           1 listen       
#&gt;  2      1       1 Human Flesh     4           1 pep          
#&gt;  3      1       1 Human Flesh     4           1 talk         
#&gt;  4      1       1 Human Flesh     5           1 day          
#&gt;  5      1       1 Human Flesh     6           1 grand        
#&gt;  6      1       1 Human Flesh     6           1 rerereopening
#&gt;  7      1       1 Human Flesh     7           1 labor        
#&gt;  8      1       1 Human Flesh     7           1 day          
#&gt;  9      1       1 Human Flesh     7           1 weekend      
#&gt; 10      1       1 Human Flesh     7           1 wharf        
#&gt; # ℹ 355,230 more rows</code></pre>
</div>
</div>

</div>
<aside><div>
<p>For our purposes today we’ll be removing stop words but know that stop words are not (always) just filler. They contain (low-level) information and depending upon the goal of your research, they may help inform your subsequent analyses.</p>
</div></aside></section>
<section id="term-frequency" class="slide level2">
<h2>Term Frequency</h2>
<p>The most basic statistic we can derive after these preliminary steps is calculating which words are used most often in our data.</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-5"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-5-1"><a href="#annotated-cell-5-1" aria-hidden="true" tabindex="-1"></a>tidy_bob <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="14">14</button><span id="annotated-cell-5-2" class="code-annotation-target"><a href="#annotated-cell-5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-5" data-target-annotation="14">14</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="2" data-code-annotation="14">This is the same as <code>group_by(word) |&gt; summarise(n = n()) |&gt; arrange(desc(n))</code></span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 25,814 × 2
#&gt;    word       n
#&gt;    &lt;chr&gt;  &lt;int&gt;
#&gt;  1 yeah    6444
#&gt;  2 uh      5320
#&gt;  3 gonna   4687
#&gt;  4 bob     3576
#&gt;  5 tina    3157
#&gt;  6 hey     2787
#&gt;  7 gene    2557
#&gt;  8 wait    2314
#&gt;  9 god     2235
#&gt; 10 louise  2002
#&gt; # ℹ 25,804 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="term-frequency-visualization" class="slide level2">
<h2>Term Frequency Visualization</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Code</a></li><li><a href="#tabset-1-2">Plot</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-44"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-44-1"><a href="#annotated-cell-44-1" aria-hidden="true" tabindex="-1"></a>observable <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#1f77b4"</span>,<span class="st">"#ff7f0e"</span>,<span class="st">"#2ca02c"</span>,<span class="st">"#d62728"</span>,<span class="st">"#9467bd"</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="15">15</button><span id="annotated-cell-44-2" class="code-annotation-target"><a href="#annotated-cell-44-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">"#8c564b"</span>,<span class="st">"#e377c2"</span>,<span class="st">"#7f7f7f"</span>,<span class="st">"#bcbd22"</span>,<span class="st">"#17becf"</span>)</span>
<span id="annotated-cell-44-3"><a href="#annotated-cell-44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-44-4"><a href="#annotated-cell-44-4" aria-hidden="true" tabindex="-1"></a>tidy_bob <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-44-5"><a href="#annotated-cell-44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(season) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-44-6"><a href="#annotated-cell-44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="16">16</button><span id="annotated-cell-44-7" class="code-annotation-target"><a href="#annotated-cell-44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> n, <span class="at">n =</span> <span class="dv">7</span>) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-44-8"><a href="#annotated-cell-44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="17">17</button><span id="annotated-cell-44-9" class="code-annotation-target"><a href="#annotated-cell-44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word_color =</span> <span class="fu">fct_reorder</span>(word, n),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="18">18</button><span id="annotated-cell-44-10" class="code-annotation-target"><a href="#annotated-cell-44-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">word =</span> <span class="fu">reorder_within</span>(word, n, season)) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-44-11"><a href="#annotated-cell-44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> n, <span class="at">y =</span> word, <span class="at">fill =</span> word_color)) <span class="sc">+</span></span>
<span id="annotated-cell-44-12"><a href="#annotated-cell-44-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="annotated-cell-44-13"><a href="#annotated-cell-44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="19">19</button><span id="annotated-cell-44-14" class="code-annotation-target"><a href="#annotated-cell-44-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reordered</span>() <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="20">20</button><span id="annotated-cell-44-15" class="code-annotation-target"><a href="#annotated-cell-44-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> observable) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="21">21</button><span id="annotated-cell-44-16" class="code-annotation-target"><a href="#annotated-cell-44-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> season, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="annotated-cell-44-17"><a href="#annotated-cell-44-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-44" data-target-annotation="15">15</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="2" data-code-annotation="15">Create an inclusive color palette (i.e.&nbsp;visually distinct colors for those with colorblindness)</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="16">16</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="7" data-code-annotation="16">Only get the top 7 words per season (which returns the top 10 words overall for these data)</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="17">17</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="9" data-code-annotation="17">Since <code>reorder_within</code> is a bit of a workaround, to apply our own color scheme we need to create a version of our variable explicitly for the <code>fill</code> argument (see <a href="https://github.com/juliasilge/juliasilge.com/issues/10">this issue</a> for reference)</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="18">18</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="10" data-code-annotation="18">Reorder the words by their count per season</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="19">19</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="14" data-code-annotation="19">This argument pairs with <code>reorder_within</code> to properly label the final plots</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="20">20</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="15" data-code-annotation="20">Applies our color palette to the 10 most common words in the data</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="21">21</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="16" data-code-annotation="21">Creates small multiples of the top 7 most common words by each season</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">

</div>
</div>
<div id="tabset-1-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-17-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="sentiment-analysis" class="title-slide slide level1 center" data-background-color="#c5b4e3">
<h1>Sentiment Analysis</h1>

</section>
<section id="section-4" class="slide level2" data-background-size="contain" data-background-image="https://www.tidytextmining.com/images/tmwr_0201.png">
<h2></h2>
</section>
<section id="sentiment-analysis-and-tidy-data" class="slide level2">
<h2>Sentiment Analysis and Tidy Data</h2>
<div>
<ul>
<li class="fragment">Sentiment analysis (aka opinion mining) can be used to get a sense of a source’s attitudes or emotions in a section of writing</li>
<li class="fragment">We can use pre-existing sentiment dictionaries, create our own, or do a combination of the two</li>
<li class="fragment">Words can be categorized in a number of ways:
<ul>
<li class="fragment">As a simple binary of negative or positive</li>
<li class="fragment">Along a numeric/likert scale from most negative to most positive</li>
<li class="fragment">According to a set of particular emotions/attitudes they represent</li>
</ul></li>
<li class="fragment">These measures can then be summarized to represent the overall sentiment or the sentiment within some subset of text (pages, chapters, books, authors, etc.).</li>
</ul>
</div>
</section>
<section id="sentiments-datasets" class="slide level2">
<h2><code>sentiments</code> datasets</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-6"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="1">1</button><span id="annotated-cell-6-1" class="code-annotation-target"><a href="#annotated-cell-6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textdata)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-6" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-6" data-code-lines="1" data-code-annotation="1">Required to download the AFINN and bing datasets</span>
</dd>
</dl>
</div>
</div>
<div class="fragment">
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">AFINN</a></li><li><a href="#tabset-2-2">bing</a></li><li><a href="#tabset-2-3">nrc</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-45"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-45" data-target-annotation="2">2</button><span id="annotated-cell-45-1" class="code-annotation-target"><a href="#annotated-cell-45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_sentiments</span>(<span class="st">"afinn"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-45" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-45" data-code-lines="1" data-code-annotation="2">Scale from -5 to 5 delineating most negative to most positive</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2,477 × 2
#&gt;    word       value
#&gt;    &lt;chr&gt;      &lt;dbl&gt;
#&gt;  1 abandon       -2
#&gt;  2 abandoned     -2
#&gt;  3 abandons      -2
#&gt;  4 abducted      -2
#&gt;  5 abduction     -2
#&gt;  6 abductions    -2
#&gt;  7 abhor         -3
#&gt;  8 abhorred      -3
#&gt;  9 abhorrent     -3
#&gt; 10 abhors        -3
#&gt; # ℹ 2,467 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-47"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-47" data-target-annotation="3">3</button><span id="annotated-cell-47-1" class="code-annotation-target"><a href="#annotated-cell-47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_sentiments</span>(<span class="st">"bing"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-47" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-47" data-code-lines="1" data-code-annotation="3">Binary categorization of positive/negative</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 6,786 × 2
#&gt;    word        sentiment
#&gt;    &lt;chr&gt;       &lt;chr&gt;    
#&gt;  1 2-faces     negative 
#&gt;  2 abnormal    negative 
#&gt;  3 abolish     negative 
#&gt;  4 abominable  negative 
#&gt;  5 abominably  negative 
#&gt;  6 abominate   negative 
#&gt;  7 abomination negative 
#&gt;  8 abort       negative 
#&gt;  9 aborted     negative 
#&gt; 10 aborts      negative 
#&gt; # ℹ 6,776 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-2-3">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-49"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-49" data-target-annotation="4">4</button><span id="annotated-cell-49-1" class="code-annotation-target"><a href="#annotated-cell-49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_sentiments</span>(<span class="st">"nrc"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-49" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-49" data-code-lines="1" data-code-annotation="4"><span class="small1">Categorizations of positive, negative, anger, anticipation, disgust, fear, joy, sadness, surprise, and trust</span></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 13,872 × 2
#&gt;    word        sentiment
#&gt;    &lt;chr&gt;       &lt;chr&gt;    
#&gt;  1 abacus      trust    
#&gt;  2 abandon     fear     
#&gt;  3 abandon     negative 
#&gt;  4 abandon     sadness  
#&gt;  5 abandoned   anger    
#&gt;  6 abandoned   fear     
#&gt;  7 abandoned   negative 
#&gt;  8 abandoned   sadness  
#&gt;  9 abandonment anger    
#&gt; 10 abandonment fear     
#&gt; # ℹ 13,862 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="compare-lexicons" class="slide level2">
<h2>Compare Lexicons</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-7"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-7-1"><a href="#annotated-cell-7-1" aria-hidden="true" tabindex="-1"></a>afinn <span class="ot">&lt;-</span> tidy_bob <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="5">5</button><span id="annotated-cell-7-2" class="code-annotation-target"><a href="#annotated-cell-7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"afinn"</span>)) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="6">6</button><span id="annotated-cell-7-3" class="code-annotation-target"><a href="#annotated-cell-7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(episode_seq) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="7">7</button><span id="annotated-cell-7-4" class="code-annotation-target"><a href="#annotated-cell-7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sentiment =</span> <span class="fu">sum</span>(value)) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="8">8</button><span id="annotated-cell-7-5" class="code-annotation-target"><a href="#annotated-cell-7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">method =</span> <span class="st">"AFINN"</span>)</span>
<span id="annotated-cell-7-6"><a href="#annotated-cell-7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-7-7"><a href="#annotated-cell-7-7" aria-hidden="true" tabindex="-1"></a>bing_and_nrc <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="annotated-cell-7-8"><a href="#annotated-cell-7-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="annotated-cell-7-9"><a href="#annotated-cell-7-9" aria-hidden="true" tabindex="-1"></a>  tidy_bob <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-7-10"><a href="#annotated-cell-7-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"bing"</span>))  <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-7-11"><a href="#annotated-cell-7-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">method =</span> <span class="st">"Bing et al."</span>),</span>
<span id="annotated-cell-7-12"><a href="#annotated-cell-7-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="annotated-cell-7-13"><a href="#annotated-cell-7-13" aria-hidden="true" tabindex="-1"></a>  tidy_bob <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-7-14"><a href="#annotated-cell-7-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"nrc"</span>) <span class="sc">|&gt;</span>  </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="9">9</button><span id="annotated-cell-7-15" class="code-annotation-target"><a href="#annotated-cell-7-15" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">filter</span>(sentiment <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"positive"</span>, <span class="st">"negative"</span>)),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="10">10</button><span id="annotated-cell-7-16" class="code-annotation-target"><a href="#annotated-cell-7-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">relationship =</span> <span class="st">"many-to-many"</span></span>
<span id="annotated-cell-7-17"><a href="#annotated-cell-7-17" aria-hidden="true" tabindex="-1"></a>    )  <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-7-18"><a href="#annotated-cell-7-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">method =</span> <span class="st">"NRC"</span>))  <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-7-19"><a href="#annotated-cell-7-19" aria-hidden="true" tabindex="-1"></a>  </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="11">11</button><span id="annotated-cell-7-20" class="code-annotation-target"><a href="#annotated-cell-7-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(method, episode_seq, sentiment)  <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="12">12</button><span id="annotated-cell-7-21" class="code-annotation-target"><a href="#annotated-cell-7-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> sentiment,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="13">13</button><span id="annotated-cell-7-22" class="code-annotation-target"><a href="#annotated-cell-7-22" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="14">14</button><span id="annotated-cell-7-23" class="code-annotation-target"><a href="#annotated-cell-7-23" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="15">15</button><span id="annotated-cell-7-24" class="code-annotation-target"><a href="#annotated-cell-7-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sentiment =</span> positive <span class="sc">-</span> negative)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-7" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="2" data-code-annotation="5">Attach lexicon values to tidy data</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="3" data-code-annotation="6">Group the data by episode</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="4" data-code-annotation="7">Sum the sentiment values for each token (word) for each episode</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="5" data-code-annotation="8">Add a column to differentiate the different methods</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="9">9</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="15" data-code-annotation="9">Keeping only the rows with “positive” or “negative” sentiments</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="10">10</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="16" data-code-annotation="10">Repeated words will match many times with this sentiment so it’s a many-to-many merge</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="11">11</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="20" data-code-annotation="11">Count the number of positive and negative sentiments by sentiment lexicon and episode number</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="12">12</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="21" data-code-annotation="12">This function takes the <code>sentiment</code> column and turns its values (<code>positive</code>, <code>negative</code>) into new columns</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="13">13</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="22" data-code-annotation="13">Values from <code>n</code> should fill the two new <code>positive</code> and <code>negative</code> sentiment columns</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="14">14</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="23" data-code-annotation="14">Implicit <code>NA</code>s (that are created by the new data structure) should be given a value of 0</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="15">15</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="24" data-code-annotation="15">Calculate overall sentiment by subtracting <code>negative</code> from <code>positive</code> counts</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">

</div>
</section>
<section id="visualize-lexicon-differences" class="slide level2">
<h2>Visualize Lexicon Differences</h2>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1"><span style="color:#2ad2c9">Code</span></a></li><li><a href="#tabset-3-2"><span style="color:#2ad2c9">Histogram</span></a></li><li><a href="#tabset-3-3"><span style="color:#e93cac">Code</span></a></li><li><a href="#tabset-3-4"><span style="color:#e93cac">Loess Curve</span></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-51"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-51-1"><a href="#annotated-cell-51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(afinn, bing_and_nrc) <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-51" data-target-annotation="16">16</button><span id="annotated-cell-51-2" class="code-annotation-target"><a href="#annotated-cell-51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sign =</span> <span class="fu">ifelse</span>(sentiment <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"positive"</span>, <span class="st">"negative"</span>)) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-51" data-target-annotation="17">17</button><span id="annotated-cell-51-3" class="code-annotation-target"><a href="#annotated-cell-51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(episode_seq, sentiment, <span class="at">fill =</span> method, <span class="at">alpha =</span> sign)) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-51" data-target-annotation="18">18</button><span id="annotated-cell-51-4" class="code-annotation-target"><a href="#annotated-cell-51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-51" data-target-annotation="19">19</button><span id="annotated-cell-51-5" class="code-annotation-target"><a href="#annotated-cell-51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-51" data-target-annotation="20">20</button><span id="annotated-cell-51-6" class="code-annotation-target"><a href="#annotated-cell-51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> observable[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-51" data-target-annotation="21">21</button><span id="annotated-cell-51-7" class="code-annotation-target"><a href="#annotated-cell-51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> method, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-51" data-target-annotation="22">22</button><span id="annotated-cell-51-8" class="code-annotation-target"><a href="#annotated-cell-51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-51" data-target-annotation="16">16</dt>
<dd>
<span data-code-cell="annotated-cell-51" data-code-lines="2" data-code-annotation="16">Create a variable to distinguish positive/negative explicitly</span>
</dd>
<dt data-target-cell="annotated-cell-51" data-target-annotation="17">17</dt>
<dd>
<span data-code-cell="annotated-cell-51" data-code-lines="3" data-code-annotation="17">Create a plot with episode number on the x-axis, sentiment on the y-axis, color the plot by method using <code>fill</code>, and create differences in transparency (<code>alpha</code>) by sign</span>
</dd>
<dt data-target-cell="annotated-cell-51" data-target-annotation="18">18</dt>
<dd>
<span data-code-cell="annotated-cell-51" data-code-lines="4" data-code-annotation="18">Use columns to represent the data</span>
</dd>
<dt data-target-cell="annotated-cell-51" data-target-annotation="19">19</dt>
<dd>
<span data-code-cell="annotated-cell-51" data-code-lines="5" data-code-annotation="19">Change alpha transparency to 50% for negative and keep at 100% (no transparency) for positive</span>
</dd>
<dt data-target-cell="annotated-cell-51" data-target-annotation="20">20</dt>
<dd>
<span data-code-cell="annotated-cell-51" data-code-lines="6" data-code-annotation="20">Manually change the <code>fill</code> colors to our pre-defined <code>observable</code> palette</span>
</dd>
<dt data-target-cell="annotated-cell-51" data-target-annotation="21">21</dt>
<dd>
<span data-code-cell="annotated-cell-51" data-code-lines="7" data-code-annotation="21">Create small multiples by the lexicon method and allow the y-axis to vary based on their respective data ranges</span>
</dd>
<dt data-target-cell="annotated-cell-51" data-target-annotation="22">22</dt>
<dd>
<span data-code-cell="annotated-cell-51" data-code-lines="8" data-code-annotation="22">Apply <code>ggplot2</code>’s minimal theme and increase the base font size</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">

</div>
</div>
<div id="tabset-3-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-24-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-3">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-52"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-52-1"><a href="#annotated-cell-52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(afinn, bing_and_nrc) <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-52" data-target-annotation="23">23</button><span id="annotated-cell-52-2" class="code-annotation-target"><a href="#annotated-cell-52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(episode_seq, sentiment, <span class="at">color =</span> method)) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-52" data-target-annotation="24">24</button><span id="annotated-cell-52-3" class="code-annotation-target"><a href="#annotated-cell-52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">span =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="annotated-cell-52-4"><a href="#annotated-cell-52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> observable[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]) <span class="sc">+</span> </span>
<span id="annotated-cell-52-5"><a href="#annotated-cell-52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="annotated-cell-52-6"><a href="#annotated-cell-52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) </span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-52" data-target-annotation="23">23</dt>
<dd>
<span data-code-cell="annotated-cell-52" data-code-lines="2" data-code-annotation="23">Use <code>color</code> here instead of <code>fill</code> since we’re mapping a line instead of a column</span>
</dd>
<dt data-target-cell="annotated-cell-52" data-target-annotation="24">24</dt>
<dd>
<span data-code-cell="annotated-cell-52" data-code-lines="3" data-code-annotation="24">Creates a moving average of sentiments (averaging window defined by <code>span</code>; <code>se</code> controls whether to show confidence intervals)</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">

</div>
</div>
<div id="tabset-3-4">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-26-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="putting-it-all-together" class="slide level2">
<h2>Putting it all together</h2>
<p>What if we want to see the top words broken down by sentiment and lexicon?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-8"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-8-1"><a href="#annotated-cell-8-1" aria-hidden="true" tabindex="-1"></a>afinn <span class="ot">&lt;-</span> tidy_bob <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-8-2"><a href="#annotated-cell-8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"afinn"</span>)) <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="26">26</button><span id="annotated-cell-8-3" class="code-annotation-target"><a href="#annotated-cell-8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sentiment =</span> <span class="fu">if_else</span>(value <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"positive"</span>, <span class="st">"negative"</span>)) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-8-4"><a href="#annotated-cell-8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, sentiment, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-8-5"><a href="#annotated-cell-8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">method =</span> <span class="st">"AFINN"</span>)</span>
<span id="annotated-cell-8-6"><a href="#annotated-cell-8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-8-7"><a href="#annotated-cell-8-7" aria-hidden="true" tabindex="-1"></a>bing <span class="ot">&lt;-</span> tidy_bob <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-8-8"><a href="#annotated-cell-8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"bing"</span>)) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-8-9"><a href="#annotated-cell-8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, sentiment, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-8-10"><a href="#annotated-cell-8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">method =</span> <span class="st">"Bing et al."</span>)</span>
<span id="annotated-cell-8-11"><a href="#annotated-cell-8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-8-12"><a href="#annotated-cell-8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-8-13"><a href="#annotated-cell-8-13" aria-hidden="true" tabindex="-1"></a>nrc <span class="ot">&lt;-</span> tidy_bob <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-8-14"><a href="#annotated-cell-8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"nrc"</span>) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-8-15"><a href="#annotated-cell-8-15" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(sentiment <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"positive"</span>, <span class="st">"negative"</span>))) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-8-16"><a href="#annotated-cell-8-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, sentiment, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-8-17"><a href="#annotated-cell-8-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">method =</span> <span class="st">"NRC"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-8" data-target-annotation="26">26</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="3" data-code-annotation="26">Recoding this sentiment to <code>negative</code> if <code>value</code> &lt; 0 and <code>positive</code> if <code>value</code> &gt; 0</span>
</dd>
</dl>
</div>
</div>
</div>
</section>
<section id="top-words-by-sentiment-lexicon" class="slide level2">
<h2>Top Words by Sentiment &amp; Lexicon</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-9"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-9-1"><a href="#annotated-cell-9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud) </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="27">27</button><span id="annotated-cell-9-2" class="code-annotation-target"><a href="#annotated-cell-9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-9" data-target-annotation="27">27</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="2" data-code-annotation="27">Needed to restructure dataset for wordclouds</span>
</dd>
</dl>
</div>
</div>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1"><span style="color:#aadb1e">Code</span></a></li><li><a href="#tabset-4-2"><span style="color:#aadb1e">AFINN</span></a></li><li><a href="#tabset-4-3"><span style="color:#e93cac">Code</span></a></li><li><a href="#tabset-4-4"><span style="color:#e93cac">bing</span></a></li><li><a href="#tabset-4-5"><span style="color:#2ad2c9">Code</span></a></li><li><a href="#tabset-4-6"><span style="color:#2ad2c9">nrc</span></a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a aria-hidden="true" tabindex="-1"></a>afinn <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">acast</span>(word <span class="sc">~</span> sentiment, <span class="at">value.var =</span> <span class="st">"n"</span>, <span class="at">fill =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">comparison.cloud</span>(<span class="at">colors =</span> observable[<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>)], </span>
<span id="cb18-5"><a aria-hidden="true" tabindex="-1"></a>                   <span class="at">title.size =</span> <span class="dv">2</span>, </span>
<span id="cb18-6"><a aria-hidden="true" tabindex="-1"></a>                   <span class="at">scale=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>),</span>
<span id="cb18-7"><a aria-hidden="true" tabindex="-1"></a>                   <span class="at">max.words =</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-30-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-3">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a aria-hidden="true" tabindex="-1"></a>bing <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">acast</span>(word <span class="sc">~</span> sentiment, <span class="at">value.var =</span> <span class="st">"n"</span>, <span class="at">fill =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb19-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">comparison.cloud</span>(<span class="at">colors =</span> observable[<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>)], </span>
<span id="cb19-5"><a aria-hidden="true" tabindex="-1"></a>                   <span class="at">scale=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>),</span>
<span id="cb19-6"><a aria-hidden="true" tabindex="-1"></a>                   <span class="at">title.size =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-4">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-32-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-5">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a aria-hidden="true" tabindex="-1"></a>nrc <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb20-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">acast</span>(word <span class="sc">~</span> sentiment, <span class="at">value.var =</span> <span class="st">"n"</span>, <span class="at">fill =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">comparison.cloud</span>(<span class="at">colors =</span> observable[<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>)], </span>
<span id="cb20-5"><a aria-hidden="true" tabindex="-1"></a>                   <span class="at">title.size =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-6">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-34-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="tf-idf" class="title-slide slide level1 center" data-background-color="#c5b4e3">
<h1>tf-idf</h1>

</section>
<section id="word-frequency" class="slide level2">
<h2>Word Frequency</h2>
<div class="small1">
<p>Most documents will have a lot of some words and not very many of much fewer words</p>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-56"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-56" data-target-annotation="1">1</button><span id="annotated-cell-56-1" class="code-annotation-target"><a href="#annotated-cell-56-1" aria-hidden="true" tabindex="-1"></a>season_words <span class="ot">&lt;-</span> clean_bob <span class="sc">|&gt;</span></span>
<span id="annotated-cell-56-2"><a href="#annotated-cell-56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(season, cleaned_text) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-56-3"><a href="#annotated-cell-56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, cleaned_text) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-56-4"><a href="#annotated-cell-56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(season, word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="annotated-cell-56-5"><a href="#annotated-cell-56-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-56-6"><a href="#annotated-cell-56-6" aria-hidden="true" tabindex="-1"></a>season_words</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-56" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-56" data-code-lines="1,2,3,4" data-code-annotation="1">Gets the count of each word by season</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 83,633 × 3
#&gt;    season word      n
#&gt;     &lt;dbl&gt; &lt;chr&gt; &lt;int&gt;
#&gt;  1     13 i      4024
#&gt;  2     12 i      3886
#&gt;  3     11 i      3832
#&gt;  4     10 i      3816
#&gt;  5      8 i      3573
#&gt;  6      7 i      3527
#&gt;  7      4 i      3476
#&gt;  8      9 i      3407
#&gt;  9      5 i      3406
#&gt; 10      3 i      3385
#&gt; # ℹ 83,623 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-58"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-58" data-target-annotation="2">2</button><span id="annotated-cell-58-1" class="code-annotation-target"><a href="#annotated-cell-58-1" aria-hidden="true" tabindex="-1"></a>total_words <span class="ot">&lt;-</span> season_words <span class="sc">|&gt;</span></span>
<span id="annotated-cell-58-2"><a href="#annotated-cell-58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(season) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-58-3"><a href="#annotated-cell-58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">sum</span>(n))</span>
<span id="annotated-cell-58-4"><a href="#annotated-cell-58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-58-5"><a href="#annotated-cell-58-5" aria-hidden="true" tabindex="-1"></a>total_words</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-58" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-58" data-code-lines="1,2,3" data-code-annotation="2">Creates a count of total words by season</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 14 × 2
#&gt;    season total
#&gt;     &lt;dbl&gt; &lt;int&gt;
#&gt;  1      1 44304
#&gt;  2      2 31904
#&gt;  3      3 84253
#&gt;  4      4 86537
#&gt;  5      5 85996
#&gt;  6      6 78691
#&gt;  7      7 90347
#&gt;  8      8 90281
#&gt;  9      9 92870
#&gt; 10     10 94967
#&gt; 11     11 95939
#&gt; 12     12 97485
#&gt; 13     13 97133
#&gt; 14     14 57223</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="word-frequency-by-season" class="slide level2">
<h2>Word Frequency by Season</h2>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1">Code</a></li><li><a href="#tabset-5-2">Visualization</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-60"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-60-1"><a href="#annotated-cell-60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(colorspace)</span>
<span id="annotated-cell-60-2"><a href="#annotated-cell-60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges) </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-60" data-target-annotation="3">3</button><span id="annotated-cell-60-3" class="code-annotation-target"><a href="#annotated-cell-60-3" aria-hidden="true" tabindex="-1"></a>season_words <span class="ot">&lt;-</span> <span class="fu">left_join</span>(season_words, total_words)</span>
<span id="annotated-cell-60-4"><a href="#annotated-cell-60-4" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-60" data-target-annotation="4">4</button><span id="annotated-cell-60-5" class="code-annotation-target"><a href="#annotated-cell-60-5" aria-hidden="true" tabindex="-1"></a>observable_light <span class="ot">&lt;-</span> <span class="fu">lighten</span>(observable, <span class="fl">0.5</span>)</span>
<span id="annotated-cell-60-6"><a href="#annotated-cell-60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-60-7"><a href="#annotated-cell-60-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(season_words, <span class="fu">aes</span>(<span class="at">x =</span> n<span class="sc">/</span>total, <span class="at">y =</span> season, <span class="at">fill =</span> <span class="fu">as_factor</span>(season))) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-60" data-target-annotation="5">5</button><span id="annotated-cell-60-8" class="code-annotation-target"><a href="#annotated-cell-60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="annotated-cell-60-9"><a href="#annotated-cell-60-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="cn">NA</span>, <span class="fl">0.0009</span>) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-60" data-target-annotation="6">6</button><span id="annotated-cell-60-10" class="code-annotation-target"><a href="#annotated-cell-60-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(observable, observable_light)[<span class="fu">order</span>(<span class="fu">rep</span>(<span class="fu">seq_along</span>(observable), <span class="dv">2</span>))][<span class="dv">1</span><span class="sc">:</span><span class="dv">14</span>]) <span class="sc">+</span></span>
<span id="annotated-cell-60-11"><a href="#annotated-cell-60-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-60" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-60" data-code-lines="3" data-code-annotation="3">Combines both datasets by season</span>
</dd>
<dt data-target-cell="annotated-cell-60" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-60" data-code-lines="5" data-code-annotation="4">Create version of observable color palette that is 50% lighter</span>
</dd>
<dt data-target-cell="annotated-cell-60" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-60" data-code-lines="8" data-code-annotation="5">A fun geom from the <code>ggridges</code> package that allows you to visualize many density curves at once</span>
</dd>
<dt data-target-cell="annotated-cell-60" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-60" data-code-lines="10" data-code-annotation="6">Switching between <code>observable</code> and <code>observable_light</code> to utilize a larger (14) color palette</span>
</dd>
</dl>
</div>
</div>
</div>
<div id="tabset-5-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-38-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tf-versus-tf-idf" class="slide level2">
<h2>tf versus tf-idf</h2>
<div class="columns">
<div class="column" style="width:35%;">
<div class="small1">
<ul>
<li class="fragment">So far we’ve been looking at term frequency (tf)</li>
<li class="fragment">Another approach is to look at a term’s inverse document frequency (idf), which decreases the weight for commonly used words and increases the weight for words that are not used very much in a collection of documents</li>
<li class="fragment">This can be combined with term frequency to calculate a term’s tf-idf (the two quantities multiplied together), which is the frequency of a term adjusted for how rarely it is used</li>
</ul>
</div>
</div><div class="column" style="width:65%;">
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(topicmodels)</span>
<span id="cb23-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a aria-hidden="true" tabindex="-1"></a>season_tf_idf <span class="ot">&lt;-</span> season_words <span class="sc">|&gt;</span> </span>
<span id="cb23-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_tf_idf</span>(word, season, n)</span>
<span id="cb23-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a aria-hidden="true" tabindex="-1"></a>season_tf_idf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 83,633 × 7
#&gt;    season word      n total     tf   idf tf_idf
#&gt;     &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
#&gt;  1     13 i      4024 97133 0.0414     0      0
#&gt;  2     12 i      3886 97485 0.0399     0      0
#&gt;  3     11 i      3832 95939 0.0399     0      0
#&gt;  4     10 i      3816 94967 0.0402     0      0
#&gt;  5      8 i      3573 90281 0.0396     0      0
#&gt;  6      7 i      3527 90347 0.0390     0      0
#&gt;  7      4 i      3476 86537 0.0402     0      0
#&gt;  8      9 i      3407 92870 0.0367     0      0
#&gt;  9      5 i      3406 85996 0.0396     0      0
#&gt; 10      3 i      3385 84253 0.0402     0      0
#&gt; # ℹ 83,623 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="highest-tf-idf-by-season" class="slide level2">
<h2>Highest tf-idf by Season</h2>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1">Ranked Data</a></li><li><a href="#tabset-6-2"><span style="color:#c5b4e3">Code</span></a></li><li><a href="#tabset-6-3"><span style="color:#c5b4e3">Bar Chart</span></a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a aria-hidden="true" tabindex="-1"></a>season_tf_idf <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>total) <span class="sc">|&gt;</span> </span>
<span id="cb25-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(tf_idf))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 83,633 × 6
#&gt;    season word            n       tf   idf  tf_idf
#&gt;     &lt;dbl&gt; &lt;chr&gt;       &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
#&gt;  1      1 ok             66 0.00149   1.54 0.00229
#&gt;  2      2 beefsquatch    23 0.000721  2.64 0.00190
#&gt;  3     14 cricket        37 0.000647  2.64 0.00171
#&gt;  4      2 rodney         16 0.000502  2.64 0.00132
#&gt;  5      9 clem           45 0.000485  2.64 0.00128
#&gt;  6     10 wharfy         43 0.000453  2.64 0.00119
#&gt;  7     12 purrbo         42 0.000431  2.64 0.00114
#&gt;  8      8 bleaken        38 0.000421  2.64 0.00111
#&gt;  9      1 torpedo        31 0.000700  1.54 0.00108
#&gt; 10      2 hanky          13 0.000407  2.64 0.00108
#&gt; # ℹ 83,623 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-6-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a aria-hidden="true" tabindex="-1"></a>season_tf_idf <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(season) <span class="sc">|&gt;</span> </span>
<span id="cb27-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(tf_idf, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb27-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb27-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(tf_idf, <span class="fu">fct_reorder</span>(word, tf_idf), <span class="at">fill =</span> <span class="fu">as_factor</span>(season))) <span class="sc">+</span></span>
<span id="cb27-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(observable, observable_light)[<span class="fu">order</span>(<span class="fu">rep</span>(<span class="fu">seq_along</span>(observable), <span class="dv">2</span>))][<span class="dv">1</span><span class="sc">:</span><span class="dv">14</span>]) <span class="sc">+</span></span>
<span id="cb27-8"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> season, <span class="at">ncol =</span> <span class="dv">5</span>, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb27-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"tf-idf"</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span> </span>
<span id="cb27-10"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-3">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-42-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="word-embeddings" class="title-slide slide level1 center" data-background-color="#c5b4e3">
<h1>Word Embeddings</h1>

</section>
<section class="slide level2">

<p><br> <br></p>
<div class="r-fit-text">
<blockquote>
<p>“You shall know a word <br> by the company it keeps.” <br> <span style="font-size: .5em; font-style: italic;">      - John Rupert Firth (British linguist)</span></p>
</blockquote>
</div>
</section>
<section id="section-5" class="slide level2" data-background-size="70%" data-background-image="https://miro.medium.com/v2/resize:fit:4800/format:webp/1*sAJdxEsDjsPMioHyzlN3_A.png">
<h2></h2>
</section>
<section id="two-approaches" class="slide level2">
<h2>Two Approaches</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><a href="https://community.alteryx.com/t5/Data-Science/Word2vec-for-the-Alteryx-Community/ba-p/305285"><img data-src="images/cbow-skipgram.png" class="quarto-figure quarto-figure-center"></a></p>
</figure>
</div>

<aside><div>
<p>CBOW (Continuous Bag of Words) takes the surrounding words to predict the target word. In contrast, the Skip-gram approach predicts context words based on the given target word.</p>
</div></aside></section>
<section id="restructuring-our-data" class="slide level2">
<h2>Restructuring our Data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-66"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-66-1"><a href="#annotated-cell-66-1" aria-hidden="true" tabindex="-1"></a>nested_eps <span class="ot">&lt;-</span> tidy_bob <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-66" data-target-annotation="1">1</button><span id="annotated-cell-66-2" class="code-annotation-target"><a href="#annotated-cell-66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_count</span>(word) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-66" data-target-annotation="2">2</button><span id="annotated-cell-66-3" class="code-annotation-target"><a href="#annotated-cell-66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;=</span> <span class="dv">50</span>) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-66-4"><a href="#annotated-cell-66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(episode_seq, word) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-66" data-target-annotation="3">3</button><span id="annotated-cell-66-5" class="code-annotation-target"><a href="#annotated-cell-66-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">words =</span> <span class="fu">c</span>(word))</span>
<span id="annotated-cell-66-6"><a href="#annotated-cell-66-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-66-7"><a href="#annotated-cell-66-7" aria-hidden="true" tabindex="-1"></a>nested_eps </span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-66" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-66" data-code-lines="2" data-code-annotation="1">Adds the count, <code>n</code>, for each word; equivalent to <code>group_by(word) |&gt; mutate(n = n())</code></span>
</dd>
<dt data-target-cell="annotated-cell-66" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-66" data-code-lines="3" data-code-annotation="2">Keep only words that occur at least 50 times</span>
</dd>
<dt data-target-cell="annotated-cell-66" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-66" data-code-lines="5" data-code-annotation="3"><code>nest</code> creates a list-column; in this case, a dataframe of all words that occurred by each episode</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 272 × 2
#&gt;    episode_seq words             
#&gt;          &lt;int&gt; &lt;list&gt;            
#&gt;  1           1 &lt;tibble [703 × 1]&gt;
#&gt;  2           2 &lt;tibble [768 × 1]&gt;
#&gt;  3           3 &lt;tibble [680 × 1]&gt;
#&gt;  4           4 &lt;tibble [778 × 1]&gt;
#&gt;  5           5 &lt;tibble [664 × 1]&gt;
#&gt;  6           6 &lt;tibble [792 × 1]&gt;
#&gt;  7           7 &lt;tibble [694 × 1]&gt;
#&gt;  8           8 &lt;tibble [714 × 1]&gt;
#&gt;  9           9 &lt;tibble [642 × 1]&gt;
#&gt; 10          10 &lt;tibble [843 × 1]&gt;
#&gt; # ℹ 262 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment small1">
<p>What do these nested tibbles look like? Let’s look at <code>words</code> from episode 1:</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a aria-hidden="true" tabindex="-1"></a>nested_eps[<span class="dv">1</span>, <span class="dv">2</span>][[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; # A tibble: 703 × 1
#&gt;    word   
#&gt;    &lt;chr&gt;  
#&gt;  1 listen 
#&gt;  2 talk   
#&gt;  3 day    
#&gt;  4 day    
#&gt;  5 weekend
#&gt;  6 wharf  
#&gt;  7 day    
#&gt;  8 reason 
#&gt;  9 linda  
#&gt; 10 middle 
#&gt; # ℹ 693 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="creating-a-window-function" class="slide level2">
<h2>Creating a Window Function</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-10"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-10-1"><a href="#annotated-cell-10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(slider)</span>
<span id="annotated-cell-10-2"><a href="#annotated-cell-10-2" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="4">4</button><span id="annotated-cell-10-3" class="code-annotation-target"><a href="#annotated-cell-10-3" aria-hidden="true" tabindex="-1"></a>slide_windows <span class="ot">&lt;-</span> <span class="cf">function</span>(tbl, window_size) {</span>
<span id="annotated-cell-10-4"><a href="#annotated-cell-10-4" aria-hidden="true" tabindex="-1"></a>  </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="5">5</button><span id="annotated-cell-10-5" class="code-annotation-target"><a href="#annotated-cell-10-5" aria-hidden="true" tabindex="-1"></a>  skipgrams <span class="ot">&lt;-</span> slider<span class="sc">::</span><span class="fu">slide</span>(</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="6">6</button><span id="annotated-cell-10-6" class="code-annotation-target"><a href="#annotated-cell-10-6" aria-hidden="true" tabindex="-1"></a>    tbl,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="7">7</button><span id="annotated-cell-10-7" class="code-annotation-target"><a href="#annotated-cell-10-7" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span>.x,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="8">8</button><span id="annotated-cell-10-8" class="code-annotation-target"><a href="#annotated-cell-10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.after =</span> window_size <span class="sc">-</span> <span class="dv">1</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="9">9</button><span id="annotated-cell-10-9" class="code-annotation-target"><a href="#annotated-cell-10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.step =</span> <span class="dv">1</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="10">10</button><span id="annotated-cell-10-10" class="code-annotation-target"><a href="#annotated-cell-10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.complete =</span> <span class="cn">TRUE</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="11">11</button><span id="annotated-cell-10-11" class="code-annotation-target"><a href="#annotated-cell-10-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="annotated-cell-10-12"><a href="#annotated-cell-10-12" aria-hidden="true" tabindex="-1"></a>  </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="12">12</button><span id="annotated-cell-10-13" class="code-annotation-target"><a href="#annotated-cell-10-13" aria-hidden="true" tabindex="-1"></a>  safe_mutate <span class="ot">&lt;-</span> <span class="fu">safely</span>(mutate)</span>
<span id="annotated-cell-10-14"><a href="#annotated-cell-10-14" aria-hidden="true" tabindex="-1"></a>  </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="13">13</button><span id="annotated-cell-10-15" class="code-annotation-target"><a href="#annotated-cell-10-15" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="fu">map2</span>(skipgrams,</span>
<span id="annotated-cell-10-16"><a href="#annotated-cell-10-16" aria-hidden="true" tabindex="-1"></a>              <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(skipgrams),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="14">14</button><span id="annotated-cell-10-17" class="code-annotation-target"><a href="#annotated-cell-10-17" aria-hidden="true" tabindex="-1"></a>              <span class="sc">~</span> <span class="fu">safe_mutate</span>(.x, <span class="at">window_id =</span> .y))</span>
<span id="annotated-cell-10-18"><a href="#annotated-cell-10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-10-19"><a href="#annotated-cell-10-19" aria-hidden="true" tabindex="-1"></a>  out <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="15">15</button><span id="annotated-cell-10-20" class="code-annotation-target"><a href="#annotated-cell-10-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list_transpose</span>() <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="16">16</button><span id="annotated-cell-10-21" class="code-annotation-target"><a href="#annotated-cell-10-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pluck</span>(<span class="st">"result"</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="17">17</button><span id="annotated-cell-10-22" class="code-annotation-target"><a href="#annotated-cell-10-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">compact</span>() <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="18">18</button><span id="annotated-cell-10-23" class="code-annotation-target"><a href="#annotated-cell-10-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_rows</span>()</span>
<span id="annotated-cell-10-24"><a href="#annotated-cell-10-24" aria-hidden="true" tabindex="-1"></a>}</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-10" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="3" data-code-annotation="4">This function identifies skip-gram windows in order to calculate the skip-gram probabilities</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="5" data-code-annotation="5">Read more about the <code>slide</code> function <a href="https://slider.r-lib.org/reference/slide.html">here</a></span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="6" data-code-annotation="6">Takes in a tibble (of words, in this case)</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="7" data-code-annotation="7">Applies a function to the window; here we’re simply returning the words as-is</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="8" data-code-annotation="8">Defines how many elements after the current one should be included in the window</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="9">9</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="9" data-code-annotation="9">How many elements to shift by when computing the window</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="10">10</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="10" data-code-annotation="10">If <code>TRUE</code>, it only evaluates complete windows (i.e.&nbsp;entire window size is available from the current element)</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="11">11</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="11" data-code-annotation="11"><code>skipgrams</code> is a list-column containing a skipgram window for each word, for each episode</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="12">12</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="13" data-code-annotation="12">Creates a version of <code>mutate</code> that won’t break the function, rather it’ll capture <code>result</code>s and <code>error</code>s in a list object for each skipgram</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="13">13</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="15,16" data-code-annotation="13"><code>map2</code> mutates over each of these skipgrams to append a <code>window_id</code> column (which is the index of the skipgram for that epidose) so we can identify them when we unpack this extremely nested <code>words</code> list later</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="14">14</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="17" data-code-annotation="14">The function that <code>map2</code> is iterating through our skipgrams and their index numbers with is <code>safe_mutate</code>, which will create a list of 2 for each skipgram it iterates through, putting successfully mutated skipgram results into <code>result</code> and unsuccessfully mutated skipgram results into <code>error</code></span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="15">15</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="20" data-code-annotation="15">Turns each episode’s <code>words</code> list from a list of skipgrams (each with a list of <code>result</code> and <code>error</code> per our <code>safe_mutate</code> function) into its transposed version, in this case two lists (<code>result</code> and <code>error</code>), each composed of the full list of skipgrams for that episode</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="16">16</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="21" data-code-annotation="16"><code>pluck</code> pulls out the <code>result</code> list for each episode’s <code>words</code> column so now each episode’s list is composed of a list of tibbles for each skipgram widow with their corresponding window_id</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="17">17</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="22" data-code-annotation="17">Removes empty skipgrams (i.e.&nbsp;where window was incomplete)</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="18">18</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="23" data-code-annotation="18">Combines all skipgram <code>word</code>s and <code>window_id</code>s into one complete tibble in <code>words</code> column corresponding to each episode</span>
</dd>
</dl>
</div>
</div>
</section>
<section id="lets-have-a-look-around" class="slide level2">
<h2>Let’s Have a Look Around 👀</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-11"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-11-1"><a href="#annotated-cell-11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(widyr)</span>
<span id="annotated-cell-11-2"><a href="#annotated-cell-11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(furrr)</span>
<span id="annotated-cell-11-3"><a href="#annotated-cell-11-3" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="19">19</button><span id="annotated-cell-11-4" class="code-annotation-target"><a href="#annotated-cell-11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession)</span>
<span id="annotated-cell-11-5"><a href="#annotated-cell-11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-11-6"><a href="#annotated-cell-11-6" aria-hidden="true" tabindex="-1"></a>tidy_pmi <span class="ot">&lt;-</span> nested_eps <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="20">20</button><span id="annotated-cell-11-7" class="code-annotation-target"><a href="#annotated-cell-11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">words =</span> <span class="fu">future_map</span>(words, \(x) <span class="fu">slide_windows</span>(x, <span class="dv">4</span>L))) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="21">21</button><span id="annotated-cell-11-8" class="code-annotation-target"><a href="#annotated-cell-11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(words) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="22">22</button><span id="annotated-cell-11-9" class="code-annotation-target"><a href="#annotated-cell-11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(window_id, episode_seq, window_id) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="23">23</button><span id="annotated-cell-11-10" class="code-annotation-target"><a href="#annotated-cell-11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pairwise_pmi</span>(word, window_id)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-11" data-target-annotation="19">19</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="4" data-code-annotation="19">Allows this process to be run computationally in parallel (huge time-saver 🙏) since each episode can be run independently of the others</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="20">20</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="7" data-code-annotation="20">Takes the <code>words</code> column and applies our <code>slide_windows()</code> function to each episode’s list with a skip-gram window of 4 words</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="21">21</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="8" data-code-annotation="21">Unnests the <code>words</code> column so it is no longer an embedded list per episode but instead we have a tibble with columns for <code>episode_seq</code>, <code>word</code>, and <code>window_id</code>. Instead of 272 rows (1 row for each episode) we now have 925,280 rows (1 row for each word in a skip-gram window for all 272 episodes)</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="22">22</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="9" data-code-annotation="22">Overwrites the <code>window_id</code> column to be a combination of <code>episode_seq</code> and <code>window_id</code>, separated by <code>_</code></span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="23">23</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="10" data-code-annotation="23">Uses each instance of a <code>word</code> and its associated <code>window_id</code> to calculate the logarithm of probability of finding two words together, normalized by the probability of finding each of the words alone.</span>
</dd>
</dl>
</div>
</div>
</section>
<section id="section-6" class="slide level2">
<h2></h2>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a aria-hidden="true" tabindex="-1"></a>tidy_pmi</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 420,500 × 3
#&gt;    item1   item2      pmi
#&gt;    &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt;
#&gt;  1 talk    listen  0.773 
#&gt;  2 day     listen -0.224 
#&gt;  3 weekend listen  0.0570
#&gt;  4 wharf   listen -0.490 
#&gt;  5 reason  listen  0.801 
#&gt;  6 linda   listen  0.110 
#&gt;  7 middle  listen -1.46  
#&gt;  8 ahead   listen -1.10  
#&gt;  9 sell    listen  0.676 
#&gt; 10 burgers listen -0.322 
#&gt; # ℹ 420,490 more rows</code></pre>
</div>
</div>

<aside><div>
<p>Our (<code>slide_windows</code>) function enables us to define a fixed-size moving window around each word. Within those windows we are able to see if two given words are seen together and calculate probabilities based on those occurrences, or lack of occurrences.</p>
<p>tl;dr, <code>tidy_pmi</code> quantifies how often we find each word near each other word.</p>
</div></aside></section>
<section id="singular-value-decomposition-svd" class="slide level2">
<h2>Singular Value Decomposition (SVD)</h2>
<div>
<ul>
<li class="fragment">We can next determine the word vectors from the PMI values using singular value decomposition (SVD)
<ul>
<li class="fragment">This is a data reduction technique akin to PCA (Principle Component Analysis), i.e.&nbsp;it works by taking our data and decomposing it onto special orthogonal axes.
<ul>
<li class="fragment">The first axis is chosen to capture as much of the variance as possible</li>
<li class="fragment">Keeping that first axis fixed, the remaining orthogonal axes are rotated to maximize the variance in the second axis</li>
<li class="fragment">This is then repeated for all the remaining axes</li>
</ul></li>
</ul></li>
</ul>
</div>
</section>
<section id="section-7" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-13"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-13-1"><a href="#annotated-cell-13-1" aria-hidden="true" tabindex="-1"></a>tidy_word_vectors <span class="ot">&lt;-</span> tidy_pmi  <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="24">24</button><span id="annotated-cell-13-2" class="code-annotation-target"><a href="#annotated-cell-13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">widely_svd</span>(</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="25">25</button><span id="annotated-cell-13-3" class="code-annotation-target"><a href="#annotated-cell-13-3" aria-hidden="true" tabindex="-1"></a>    item1, item2, pmi,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="26">26</button><span id="annotated-cell-13-4" class="code-annotation-target"><a href="#annotated-cell-13-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">nv =</span> <span class="dv">100</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="27">27</button><span id="annotated-cell-13-5" class="code-annotation-target"><a href="#annotated-cell-13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">maxit =</span> <span class="dv">1000</span></span>
<span id="annotated-cell-13-6"><a href="#annotated-cell-13-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="annotated-cell-13-7"><a href="#annotated-cell-13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-13-8"><a href="#annotated-cell-13-8" aria-hidden="true" tabindex="-1"></a>tidy_word_vectors</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-13" data-target-annotation="24">24</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="2" data-code-annotation="24">Takes our <code>tidy_pmi</code> table, turns it into a wide matrix, and performs dimensionality reduction on it, and returns it in tidy format</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="25">25</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="3" data-code-annotation="25"><code>item1</code> serves as the item we want to perform dimensionality reduction on, <code>item2</code> is the feature that links items to one another, and <code>pmi</code> is the value we’re reducing</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="26">26</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="4" data-code-annotation="26">Number of principle components to estimate</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="27">27</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="5" data-code-annotation="27">Optional argument specifying the maximum number of iterations</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">

</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 116,600 × 3
#&gt;    item1   dimension    value
#&gt;    &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;
#&gt;  1 talk            1  0.0273 
#&gt;  2 day             1  0.0487 
#&gt;  3 weekend         1 -0.0351 
#&gt;  4 wharf           1 -0.0366 
#&gt;  5 reason          1 -0.0341 
#&gt;  6 linda           1  0.0604 
#&gt;  7 middle          1 -0.0319 
#&gt;  8 ahead           1 -0.0267 
#&gt;  9 sell            1 -0.0293 
#&gt; 10 burgers         1 -0.00294
#&gt; # ℹ 116,590 more rows</code></pre>
</div>
</div>
</section>
<section id="section-8" class="slide level2" data-background-image="https://www.russellmoore.com/wp-content/uploads/2018/03/mister_rogers_feature_2_1050x700.jpg" data-background-size="cover" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="position: absolute; bottom:50px; left:5px; font-size: 0em; color:#fcdd60">
<p>Won’t You Be My Neighbor?</p>
</div>
</section>
<section id="section-9" class="slide level2" data-background-image="https://www.russellmoore.com/wp-content/uploads/2018/03/mister_rogers_feature_2_1050x700.jpg" data-background-size="cover" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="position: absolute; bottom:50px; left:5px; font-size: 2.5em; color:#fcdd60">
<p>Won’t You Be My Neighbor?</p>
</div>
</section>
<section class="slide level2">

<p><span class="small1">Which words are close to each other in this new feature-space of word embeddings?</span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-14"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-14" data-target-annotation="28">28</button><span id="annotated-cell-14-1" class="code-annotation-target"><a href="#annotated-cell-14-1" aria-hidden="true" tabindex="-1"></a>nearest_neighbors <span class="ot">&lt;-</span> <span class="cf">function</span>(df, token) {</span>
<span id="annotated-cell-14-2"><a href="#annotated-cell-14-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="annotated-cell-14-3"><a href="#annotated-cell-14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">widely</span>(</span>
<span id="annotated-cell-14-4"><a href="#annotated-cell-14-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> {</span>
<span id="annotated-cell-14-5"><a href="#annotated-cell-14-5" aria-hidden="true" tabindex="-1"></a>        y <span class="ot">&lt;-</span> .[<span class="fu">rep</span>(token, <span class="fu">nrow</span>(.)), ]</span>
<span id="annotated-cell-14-6"><a href="#annotated-cell-14-6" aria-hidden="true" tabindex="-1"></a>        res <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(. <span class="sc">*</span> y) <span class="sc">/</span> </span>
<span id="annotated-cell-14-7"><a href="#annotated-cell-14-7" aria-hidden="true" tabindex="-1"></a>          (<span class="fu">sqrt</span>(<span class="fu">rowSums</span>(. <span class="sc">^</span> <span class="dv">2</span>)) <span class="sc">*</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(.[token, ] <span class="sc">^</span> <span class="dv">2</span>)))</span>
<span id="annotated-cell-14-8"><a href="#annotated-cell-14-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="annotated-cell-14-9"><a href="#annotated-cell-14-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">matrix</span>(res, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="at">x =</span> <span class="fu">names</span>(res)))</span>
<span id="annotated-cell-14-10"><a href="#annotated-cell-14-10" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="annotated-cell-14-11"><a href="#annotated-cell-14-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">sort =</span> <span class="cn">TRUE</span></span>
<span id="annotated-cell-14-12"><a href="#annotated-cell-14-12" aria-hidden="true" tabindex="-1"></a>    )(item1, dimension, value) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-14-13"><a href="#annotated-cell-14-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>item2)</span>
<span id="annotated-cell-14-14"><a href="#annotated-cell-14-14" aria-hidden="true" tabindex="-1"></a>}</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-14" data-target-annotation="28">28</dt>
<dd>
<span data-code-cell="annotated-cell-14" data-code-lines="1" data-code-annotation="28">This function will find the nearest words to any given example using our newly created word embeddings</span>
</dd>
</dl>
</div>
</div>

</div>
<aside><div>
<p>This function takes the tidy word embeddings as input, along with a word (or token, more strictly) as a string. It uses matrix multiplication and sums to calculate the cosine similarity between the specified word and all the words in the embedding to find which words are closer or farther to the input word, and returns a dataframe sorted by similarity.</p>
</div></aside></section>
<section class="slide level2">

<p><br></p>
<div class="columns">
<div class="column" style="width:33.33%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a aria-hidden="true" tabindex="-1"></a>tidy_word_vectors <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">nearest_neighbors</span>(</span>
<span id="cb34-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="st">"weird"</span></span>
<span id="cb34-4"><a aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,166 × 2
#&gt;    item1  value
#&gt;    &lt;chr&gt;  &lt;dbl&gt;
#&gt;  1 weird  1    
#&gt;  2 makes  0.348
#&gt;  3 sounds 0.315
#&gt;  4 bad    0.313
#&gt;  5 crazy  0.303
#&gt;  6 uhhuh  0.271
#&gt;  7 hiding 0.259
#&gt;  8 bobby  0.252
#&gt;  9 pig    0.252
#&gt; 10 havent 0.247
#&gt; # ℹ 1,156 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:33.33%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a aria-hidden="true" tabindex="-1"></a>tidy_word_vectors <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">nearest_neighbors</span>(</span>
<span id="cb36-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="st">"jimmy"</span></span>
<span id="cb36-4"><a aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,166 × 2
#&gt;    item1  value
#&gt;    &lt;chr&gt;  &lt;dbl&gt;
#&gt;  1 jimmy  1    
#&gt;  2 jr     0.596
#&gt;  3 pesto  0.502
#&gt;  4 zeke   0.398
#&gt;  5 trev   0.375
#&gt;  6 told   0.371
#&gt;  7 pestos 0.356
#&gt;  8 friend 0.291
#&gt;  9 butt   0.267
#&gt; 10 pizza  0.260
#&gt; # ℹ 1,156 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:33.33%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a aria-hidden="true" tabindex="-1"></a>tidy_word_vectors <span class="sc">|&gt;</span> </span>
<span id="cb38-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">nearest_neighbors</span>(</span>
<span id="cb38-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="st">"fart"</span></span>
<span id="cb38-4"><a aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,166 × 2
#&gt;    item1   value
#&gt;    &lt;chr&gt;   &lt;dbl&gt;
#&gt;  1 fart    1    
#&gt;  2 farts   0.417
#&gt;  3 loud    0.377
#&gt;  4 gas     0.339
#&gt;  5 iii     0.329
#&gt;  6 fire    0.323
#&gt;  7 teeth   0.287
#&gt;  8 notice  0.266
#&gt;  9 turkeys 0.263
#&gt; 10 pee     0.252
#&gt; # ℹ 1,156 more rows</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="dimensions-explaining-most-variation" class="slide level2">
<h2>Dimensions Explaining Most Variation</h2>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1">Code</a></li><li><a href="#tabset-7-2">Bar Chart</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a aria-hidden="true" tabindex="-1"></a>tidy_word_vectors <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dimension <span class="sc">&lt;=</span> <span class="dv">9</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sign =</span> <span class="fu">if_else</span>(value <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"positive"</span>, <span class="st">"negative"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb40-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dimension) <span class="sc">|&gt;</span></span>
<span id="cb40-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">10</span>, <span class="fu">abs</span>(value)) <span class="sc">|&gt;</span></span>
<span id="cb40-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb40-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">item1 =</span> <span class="fu">reorder_within</span>(item1, value, dimension)) <span class="sc">|&gt;</span></span>
<span id="cb40-8"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(item1, value, <span class="at">fill =</span> <span class="fu">as_factor</span>(dimension), <span class="at">alpha =</span> sign)) <span class="sc">+</span></span>
<span id="cb40-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb40-10"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> dimension, <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb40-11"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb40-12"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> observable[<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>]) <span class="sc">+</span></span>
<span id="cb40-13"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb40-14"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb40-15"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb40-16"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb40-17"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span>,</span>
<span id="cb40-18"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"First 9 principal components for text of Bob's Burgers scripts"</span>,</span>
<span id="cb40-19"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Top words contributing to the components that explain the most variation"</span>) <span class="sc">+</span> </span>
<span id="cb40-20"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-7-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-56-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="pre-trained-embeddings" class="slide level2">
<h2>Pre-trained Embeddings</h2>
<div>
<ul>
<li class="fragment">Word-embeddings work well when you have a large amount of data and our Bob dataset is a bit small
<ul>
<li class="fragment">In that case, you may want to explore using pre-trained word-embeddings</li>
</ul></li>
<li class="fragment">We’re going to use the <code>wordsalad</code> package which provides some convenient functions to access some of the more popular pre-trained embeddings</li>
</ul>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-79"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-79-1"><a href="#annotated-cell-79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordsalad)</span>
<span id="annotated-cell-79-2"><a href="#annotated-cell-79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-79-3"><a href="#annotated-cell-79-3" aria-hidden="true" tabindex="-1"></a>glove_word_vec <span class="ot">&lt;-</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-79" data-target-annotation="29">29</button><span id="annotated-cell-79-4" class="code-annotation-target"><a href="#annotated-cell-79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glove</span>(<span class="at">text =</span> clean_bob<span class="sc">$</span>cleaned_text,</span>
<span id="annotated-cell-79-5"><a href="#annotated-cell-79-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">dim =</span> <span class="dv">100</span>, </span>
<span id="annotated-cell-79-6"><a href="#annotated-cell-79-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">window =</span> <span class="dv">4</span>, </span>
<span id="annotated-cell-79-7"><a href="#annotated-cell-79-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">min_count =</span> <span class="dv">50</span>, </span>
<span id="annotated-cell-79-8"><a href="#annotated-cell-79-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">stopwords =</span> stop_words<span class="sc">$</span>word, </span>
<span id="annotated-cell-79-9"><a href="#annotated-cell-79-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">composition =</span> <span class="st">"tibble"</span>)</span>
<span id="annotated-cell-79-10"><a href="#annotated-cell-79-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-79-11"><a href="#annotated-cell-79-11" aria-hidden="true" tabindex="-1"></a>glove_word_vec</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-79" data-target-annotation="29">29</dt>
<dd>
<span data-code-cell="annotated-cell-79" data-code-lines="4" data-code-annotation="29">Global Vectors for Word Representation, aka <a href="https://nlp.stanford.edu/projects/glove/">GloVe</a></span>
</dd>
</dl>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,166 × 101
#&gt;    tokens         V1      V2      V3       V4      V5      V6      V7       V8
#&gt;    &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
#&gt;  1 aa         0.0849 -0.599   0.275  -0.233    0.0862 -0.104  -0.0301 -0.169  
#&gt;  2 admit      0.718  -0.213  -0.211  -0.0504   0.508  -0.104  -0.0441  0.304  
#&gt;  3 breaking  -0.131   0.569  -0.236  -0.00908  0.447  -0.302  -0.307   0.212  
#&gt;  4 ceiling   -0.353  -0.346  -0.356  -0.418    0.0683 -0.0663  0.176  -0.183  
#&gt;  5 character -0.158   0.423   0.889  -0.247    0.536   0.0749  0.138   0.902  
#&gt;  6 cleaning   0.0753 -0.0813 -0.0965 -0.205   -0.260   0.207   0.933  -0.117  
#&gt;  7 closet     0.0156  0.157   0.391  -0.566    0.188  -0.189   0.506   0.354  
#&gt;  8 college   -0.301   0.312   0.138   0.219   -0.390   0.218  -0.428  -0.227  
#&gt;  9 corn      -0.251  -0.313  -0.508  -0.470   -0.393   0.269  -0.130   0.0282 
#&gt; 10 destroy    0.314   0.0674  0.642   0.161   -0.434  -0.0652  0.770   0.00947
#&gt; # ℹ 1,156 more rows
#&gt; # ℹ 92 more variables: V9 &lt;dbl&gt;, V10 &lt;dbl&gt;, V11 &lt;dbl&gt;, V12 &lt;dbl&gt;, V13 &lt;dbl&gt;,
#&gt; #   V14 &lt;dbl&gt;, V15 &lt;dbl&gt;, V16 &lt;dbl&gt;, V17 &lt;dbl&gt;, V18 &lt;dbl&gt;, V19 &lt;dbl&gt;,
#&gt; #   V20 &lt;dbl&gt;, V21 &lt;dbl&gt;, V22 &lt;dbl&gt;, V23 &lt;dbl&gt;, V24 &lt;dbl&gt;, V25 &lt;dbl&gt;,
#&gt; #   V26 &lt;dbl&gt;, V27 &lt;dbl&gt;, V28 &lt;dbl&gt;, V29 &lt;dbl&gt;, V30 &lt;dbl&gt;, V31 &lt;dbl&gt;,
#&gt; #   V32 &lt;dbl&gt;, V33 &lt;dbl&gt;, V34 &lt;dbl&gt;, V35 &lt;dbl&gt;, V36 &lt;dbl&gt;, V37 &lt;dbl&gt;,
#&gt; #   V38 &lt;dbl&gt;, V39 &lt;dbl&gt;, V40 &lt;dbl&gt;, V41 &lt;dbl&gt;, V42 &lt;dbl&gt;, V43 &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="tidying-our-gloves" class="slide level2">
<h2>Tidying our GloVe(s)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a aria-hidden="true" tabindex="-1"></a>tidy_glove <span class="ot">&lt;-</span> </span>
<span id="cb42-2"><a aria-hidden="true" tabindex="-1"></a>  glove_word_vec <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">contains</span>(<span class="st">"V"</span>),</span>
<span id="cb42-4"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"dimension"</span>, </span>
<span id="cb42-5"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">names_prefix =</span> <span class="st">"V"</span>, </span>
<span id="cb42-6"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">dimension =</span> as.integer)) <span class="sc">|&gt;</span> </span>
<span id="cb42-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">item1 =</span> tokens)</span>
<span id="cb42-8"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a aria-hidden="true" tabindex="-1"></a>tidy_glove</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 116,600 × 3
#&gt;    item1 dimension   value
#&gt;    &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;
#&gt;  1 aa            1  0.0849
#&gt;  2 aa            2 -0.599 
#&gt;  3 aa            3  0.275 
#&gt;  4 aa            4 -0.233 
#&gt;  5 aa            5  0.0862
#&gt;  6 aa            6 -0.104 
#&gt;  7 aa            7 -0.0301
#&gt;  8 aa            8 -0.169 
#&gt;  9 aa            9  0.344 
#&gt; 10 aa           10  0.796 
#&gt; # ℹ 116,590 more rows</code></pre>
</div>
</div>
</section>
<section id="most-variation-pre-trained" class="slide level2">
<h2>Most Variation (Pre-Trained)</h2>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1">Code</a></li><li><a href="#tabset-8-2">Bar Chart</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a aria-hidden="true" tabindex="-1"></a>tidy_glove <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dimension <span class="sc">&lt;=</span> <span class="dv">9</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb44-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sign =</span> <span class="fu">if_else</span>(value <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"positive"</span>, <span class="st">"negative"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb44-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dimension) <span class="sc">|&gt;</span></span>
<span id="cb44-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">10</span>, <span class="fu">abs</span>(value)) <span class="sc">|&gt;</span></span>
<span id="cb44-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb44-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">item1 =</span> <span class="fu">reorder_within</span>(item1, value, dimension)) <span class="sc">|&gt;</span></span>
<span id="cb44-8"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(item1, value, <span class="at">fill =</span> <span class="fu">as_factor</span>(dimension), <span class="at">alpha =</span> sign)) <span class="sc">+</span></span>
<span id="cb44-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb44-10"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>dimension, <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb44-11"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb44-12"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> observable[<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>]) <span class="sc">+</span></span>
<span id="cb44-13"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb44-14"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb44-15"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb44-16"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb44-17"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span>,</span>
<span id="cb44-18"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"First 9 principal components for text of Bob's Burgers scripts using GloVe word embeddings"</span>,</span>
<span id="cb44-19"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Top words contributing to the components that explain the most variation"</span>) <span class="sc">+</span> </span>
<span id="cb44-20"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-8-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-61-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="topic-modeling" class="title-slide slide level1 center" data-background-color="#c5b4e3">
<h1>Topic Modeling</h1>

</section>
<section id="section-10" class="slide level2" data-background-size="contain" data-background-image="https://keepcoding.io/wp-content/uploads/2023/02/image-157.png">
<h2></h2>
</section>
<section id="latent-dirichlet-allocation-lda" class="slide level2">
<h2>Latent Dirichlet allocation (LDA)</h2>
<div>
<ul>
<li class="fragment">A type of Bayesian network model that makes two general assumptions
<ul>
<li class="fragment">Each document is a mixture of topics</li>
<li class="fragment">Each topic is a distribution of words</li>
</ul></li>
</ul>
</div>
<div class="fragment r-fit-text">
<blockquote>
<p>LDA is a mathematical method for estimating <br> both of these at the same time: finding the <br> mixture of words that is associated with each <br> topic, while also determining the mixture <br> of topics that describes each document.</p>
</blockquote>
</div>
</section>
<section id="section-11" class="slide level2" data-background-size="contain" data-background-image="https://www.tidytextmining.com/images/tmwr_0601.png">
<h2></h2>
</section>
<section id="cast-tidy-data-into-a-matrix" class="slide level2">
<h2>Cast Tidy Data into a Matrix</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-16"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-16-1"><a href="#annotated-cell-16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(topicmodels)</span>
<span id="annotated-cell-16-2"><a href="#annotated-cell-16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-16-3"><a href="#annotated-cell-16-3" aria-hidden="true" tabindex="-1"></a>bob_matrix <span class="ot">&lt;-</span> season_words <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-16-4"><a href="#annotated-cell-16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-16" data-target-annotation="1">1</button><span id="annotated-cell-16-5" class="code-annotation-target"><a href="#annotated-cell-16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cast_dtm</span>(season, word, n)</span>
<span id="annotated-cell-16-6"><a href="#annotated-cell-16-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="annotated-cell-16-7"><a href="#annotated-cell-16-7" aria-hidden="true" tabindex="-1"></a>bob_matrix</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-16" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-16" data-code-lines="5" data-code-annotation="1">This function turns tidy data (with one token per row/observation) into a Document x Term matrix (necessary data structure for topic modeling)</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; &lt;&lt;DocumentTermMatrix (documents: 14, terms: 25814)&gt;&gt;
#&gt; Non-/sparse entries: 76935/284461
#&gt; Sparsity           : 79%
#&gt; Maximal term length: 28
#&gt; Weighting          : term frequency (tf)</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-84"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-84" data-target-annotation="2">2</button><span id="annotated-cell-84-1" class="code-annotation-target"><a href="#annotated-cell-84-1" aria-hidden="true" tabindex="-1"></a>bob_matrix<span class="sc">$</span>dimnames<span class="sc">$</span>Docs</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-84" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-84" data-code-lines="1" data-code-annotation="2">This shows us the row names of our sparse matrix (the documents that make up our corpus)</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  [1] "11" "12" "10" "13" "9"  "4"  "7"  "8"  "3"  "5"  "6"  "14" "1"  "2"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-86"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-86" data-target-annotation="3">3</button><span id="annotated-cell-86-1" class="code-annotation-target"><a href="#annotated-cell-86-1" aria-hidden="true" tabindex="-1"></a>bob_matrix<span class="sc">$</span>dimnames<span class="sc">$</span>Terms <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">50</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-86" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-86" data-code-lines="1" data-code-annotation="3">Here we see the first 50 column names (tokens/words) of our sparse matrix (out of 25464 total)</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  [1] "yeah"   "uh"     "gonna"  "bob"    "tina"   "hey"    "gene"   "god"   
#&gt;  [9] "wait"   "louise" "teddy"  "guys"   "kids"   "time"   "dad"    "linda" 
#&gt; [17] "mom"    "love"   "um"     "day"    "huh"    "ii"     "people" "boo"   
#&gt; [25] "fine"   "stop"   "whoa"   "ah"     "fun"    "lot"    "nice"   "lin"   
#&gt; [33] "bobby"  "stuff"  "guess"  "ooh"    "cat"    "pretty" "house"  "school"
#&gt; [41] "couch"  "bad"    "ha"     "aah"    "jimmy"  "coming" "ow"     "cool"  
#&gt; [49] "feel"   "home"</code></pre>
</div>
</div>
</div>
</section>
<section id="runing-our-lda-model" class="slide level2">
<h2>Runing our LDA Model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-17"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-17-1"><a href="#annotated-cell-17-1" aria-hidden="true" tabindex="-1"></a>bob_lda <span class="ot">&lt;-</span> <span class="fu">LDA</span>(bob_matrix, </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-17" data-target-annotation="4">4</button><span id="annotated-cell-17-2" class="code-annotation-target"><a href="#annotated-cell-17-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">k =</span> <span class="dv">5</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-17" data-target-annotation="5">5</button><span id="annotated-cell-17-3" class="code-annotation-target"><a href="#annotated-cell-17-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">control =</span> <span class="fu">list</span>(<span class="at">seed =</span> <span class="dv">01302025</span>))</span>
<span id="annotated-cell-17-4"><a href="#annotated-cell-17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-17-5"><a href="#annotated-cell-17-5" aria-hidden="true" tabindex="-1"></a>bob_lda</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-17" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-17" data-code-lines="2" data-code-annotation="4">Need to specify the number of topics (read more about how one might select the best K value <a href="https://juliasilge.com/blog/evaluating-stm/">here</a>)</span>
</dd>
<dt data-target-cell="annotated-cell-17" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-17" data-code-lines="3" data-code-annotation="5">Set a seed so that the output of the model is predictable</span>
</dd>
</dl>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; A LDA_VEM topic model with 5 topics.</code></pre>
</div>
</div>
</section>
<section id="per-topic-per-word-probabilities" class="slide level2">
<h2>Per-Topic-Per-Word Probabilities</h2>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1">Beta Matrix</a></li><li><a href="#tabset-9-2">Top Terms</a></li><li><a href="#tabset-9-3"><span style="color:#e93cac">Code</span></a></li><li><a href="#tabset-9-4"><span style="color:#e93cac">Bar Chart</span></a></li></ul>
<div class="tab-content">
<div id="tabset-9-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a aria-hidden="true" tabindex="-1"></a>bob_topics <span class="ot">&lt;-</span> <span class="fu">tidy</span>(bob_lda, <span class="at">matrix =</span> <span class="st">"beta"</span>) </span>
<span id="cb49-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a aria-hidden="true" tabindex="-1"></a>bob_topics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 129,070 × 3
#&gt;    topic term    beta
#&gt;    &lt;int&gt; &lt;chr&gt;  &lt;dbl&gt;
#&gt;  1     1 yeah  0.0180
#&gt;  2     2 yeah  0.0179
#&gt;  3     3 yeah  0.0191
#&gt;  4     4 yeah  0.0173
#&gt;  5     5 yeah  0.0181
#&gt;  6     1 uh    0.0128
#&gt;  7     2 uh    0.0141
#&gt;  8     3 uh    0.0187
#&gt;  9     4 uh    0.0158
#&gt; 10     5 uh    0.0136
#&gt; # ℹ 129,060 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-9-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a aria-hidden="true" tabindex="-1"></a>bob_top_terms <span class="ot">&lt;-</span> bob_topics <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">|&gt;</span> </span>
<span id="cb51-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(beta, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb51-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(topic, <span class="sc">-</span>beta)</span>
<span id="cb51-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a aria-hidden="true" tabindex="-1"></a>bob_top_terms</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 50 × 3
#&gt;    topic term     beta
#&gt;    &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;
#&gt;  1     1 yeah  0.0180 
#&gt;  2     1 uh    0.0128 
#&gt;  3     1 bob   0.0120 
#&gt;  4     1 gonna 0.0120 
#&gt;  5     1 hey   0.00958
#&gt;  6     1 tina  0.00891
#&gt;  7     1 gene  0.00774
#&gt;  8     1 god   0.00627
#&gt;  9     1 dad   0.00615
#&gt; 10     1 wait  0.00607
#&gt; # ℹ 40 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-9-3">
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a aria-hidden="true" tabindex="-1"></a>bob_top_terms <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">reorder_within</span>(term, beta, topic)) <span class="sc">|&gt;</span> </span>
<span id="cb53-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(beta, term, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb53-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb53-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb53-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reordered</span>() <span class="sc">+</span> </span>
<span id="cb53-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> observable[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]) <span class="sc">+</span> </span>
<span id="cb53-8"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-9-4">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-70-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="document-topic-probabilities" class="slide level2">
<h2>Document-topic Probabilities</h2>
<div class="panel-tabset">
<ul id="tabset-10" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-10-1">Gamma Matrix</a></li><li><a href="#tabset-10-2"><span style="color:#c5b4e3">Code</span></a></li><li><a href="#tabset-10-3"><span style="color:#c5b4e3">Bar Chart</span></a></li></ul>
<div class="tab-content">
<div id="tabset-10-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a aria-hidden="true" tabindex="-1"></a>bob_documents <span class="ot">&lt;-</span> <span class="fu">tidy</span>(bob_lda, <span class="at">matrix =</span> <span class="st">"gamma"</span>)</span>
<span id="cb54-2"><a aria-hidden="true" tabindex="-1"></a>bob_documents</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 70 × 3
#&gt;    document topic       gamma
#&gt;    &lt;chr&gt;    &lt;int&gt;       &lt;dbl&gt;
#&gt;  1 11           1 0.000000666
#&gt;  2 12           1 0.000000668
#&gt;  3 10           1 0.000000668
#&gt;  4 13           1 0.000000671
#&gt;  5 9            1 0.000000660
#&gt;  6 4            1 0.000000741
#&gt;  7 7            1 1.00       
#&gt;  8 8            1 0.000000699
#&gt;  9 3            1 1.00       
#&gt; 10 5            1 0.00232    
#&gt; # ℹ 60 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-10-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a aria-hidden="true" tabindex="-1"></a>bob_documents <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">document =</span> <span class="fu">fct</span>(document, <span class="at">levels =</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">14</span>) <span class="sc">|&gt;</span> <span class="fu">as.character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb56-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">|&gt;</span> </span>
<span id="cb56-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(gamma, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(topic, <span class="sc">-</span>gamma) <span class="sc">|&gt;</span> </span>
<span id="cb56-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gamma, document, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb56-8"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">alpha =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb56-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> observable[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]) <span class="sc">+</span> </span>
<span id="cb56-10"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-10-3">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-73-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="bobs-kinda-boring" class="slide level2">
<h2>Bob’s kinda boring <sup>1</sup>…</h2>
<div class="fragment">
<p>A better example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gutenbergr)</span>
<span id="cb57-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a aria-hidden="true" tabindex="-1"></a>books <span class="ot">&lt;-</span> <span class="fu">gutenberg_download</span>(<span class="fu">c</span>(<span class="dv">61</span>, <span class="dv">408</span>, <span class="dv">833</span>, <span class="dv">14977</span>), </span>
<span id="cb57-4"><a aria-hidden="true" tabindex="-1"></a>                            <span class="at">meta_fields =</span> <span class="fu">c</span>(<span class="st">"title"</span>, <span class="st">"author"</span>))</span>
<span id="cb57-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-6"><a aria-hidden="true" tabindex="-1"></a>books <span class="sc">|&gt;</span> <span class="fu">distinct</span>(author, title)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 5 × 2
#&gt;   author                                       title                            
#&gt;   &lt;chr&gt;                                        &lt;chr&gt;                            
#&gt; 1 Marx, Karl                                   "The Communist Manifesto"        
#&gt; 2 Engels, Friedrich                            "The Communist Manifesto"        
#&gt; 3 Du Bois, W. E. B. (William Edward Burghardt) "The Souls of Black Folk"        
#&gt; 4 Veblen, Thorstein                            "The Theory of the Leisure Class"
#&gt; 5 Wells-Barnett, Ida B.                        "The Red Record\nTabulated Stati…</code></pre>
</div>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn6"><p>As a dataset for topic modeling, that is. Not as the perfect comfort show!</p></li></ol></aside></section>
<section id="book-cleaning" class="slide level2">
<h2>Book Cleaning</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-19"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-19-1"><a href="#annotated-cell-19-1" aria-hidden="true" tabindex="-1"></a>books <span class="ot">&lt;-</span> books <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="6">6</button><span id="annotated-cell-19-2" class="code-annotation-target"><a href="#annotated-cell-19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(text, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="7">7</button><span id="annotated-cell-19-3" class="code-annotation-target"><a href="#annotated-cell-19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">author =</span> <span class="fu">if_else</span>(author <span class="sc">==</span> <span class="st">"Marx, Karl"</span>,</span>
<span id="annotated-cell-19-4"><a href="#annotated-cell-19-4" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Marx, Karl; Engels, Friedrich"</span>,</span>
<span id="annotated-cell-19-5"><a href="#annotated-cell-19-5" aria-hidden="true" tabindex="-1"></a>                          author),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="8">8</button><span id="annotated-cell-19-6" class="code-annotation-target"><a href="#annotated-cell-19-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(title, <span class="st">"The Red Record"</span>),</span>
<span id="annotated-cell-19-7"><a href="#annotated-cell-19-7" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"The Red Record"</span>,</span>
<span id="annotated-cell-19-8"><a href="#annotated-cell-19-8" aria-hidden="true" tabindex="-1"></a>                         title))</span>
<span id="annotated-cell-19-9"><a href="#annotated-cell-19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-19-10"><a href="#annotated-cell-19-10" aria-hidden="true" tabindex="-1"></a>books</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-19" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-19" data-code-lines="2" data-code-annotation="6">Remove duplicates of The Communist Manifesto</span>
</dd>
<dt data-target-cell="annotated-cell-19" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-19" data-code-lines="3,4,5" data-code-annotation="7">Explicitly adding Engels to Communist Manifesto authorship</span>
</dd>
<dt data-target-cell="annotated-cell-19" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-19" data-code-lines="6,7,8" data-code-annotation="8">Truncating The Red Record for readability</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 19,636 × 4
#&gt;    gutenberg_id text                                                title author
#&gt;           &lt;int&gt; &lt;chr&gt;                                               &lt;chr&gt; &lt;chr&gt; 
#&gt;  1           61 "The Communist Manifesto"                           The … Marx,…
#&gt;  2           61 ""                                                  The … Marx,…
#&gt;  3           61 "by Karl Marx and Friedrich Engels"                 The … Marx,…
#&gt;  4           61 "[From the English edition of 1888, edited by Frie… The … Marx,…
#&gt;  5           61 "Contents"                                          The … Marx,…
#&gt;  6           61 " I. BOURGEOIS AND PROLETARIANS"                    The … Marx,…
#&gt;  7           61 " II. PROLETARIANS AND COMMUNISTS"                  The … Marx,…
#&gt;  8           61 " III. SOCIALIST AND COMMUNIST LITERATURE"          The … Marx,…
#&gt;  9           61 " IV. POSITION OF THE COMMUNISTS IN RELATION TO TH… The … Marx,…
#&gt; 10           61 "A spectre is haunting Europe—the spectre of Commu… The … Marx,…
#&gt; # ℹ 19,626 more rows</code></pre>
</div>
</div>
</section>
<section id="divide-each-book-into-sections" class="slide level2">
<h2>Divide Each Book into Sections</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-20"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-20-1"><a href="#annotated-cell-20-1" aria-hidden="true" tabindex="-1"></a>by_section <span class="ot">&lt;-</span> books <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="9">9</button><span id="annotated-cell-20-2" class="code-annotation-target"><a href="#annotated-cell-20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(text <span class="sc">!=</span> <span class="st">""</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="10">10</button><span id="annotated-cell-20-3" class="code-annotation-target"><a href="#annotated-cell-20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">text =</span> <span class="fu">str_remove_all</span>(text, <span class="st">"[:digit:]"</span>),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="11">11</button><span id="annotated-cell-20-4" class="code-annotation-target"><a href="#annotated-cell-20-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">word_count =</span> <span class="fu">str_count</span>(text, <span class="st">"</span><span class="sc">\\</span><span class="st">S+"</span>)) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-20-5"><a href="#annotated-cell-20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(title) <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="12">12</button><span id="annotated-cell-20-6" class="code-annotation-target"><a href="#annotated-cell-20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cumulative_words =</span> <span class="fu">cumsum</span>(word_count),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="13">13</button><span id="annotated-cell-20-7" class="code-annotation-target"><a href="#annotated-cell-20-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">row_chunk =</span> <span class="fu">ceiling</span>(cumulative_words <span class="sc">/</span> <span class="dv">2000</span>)) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-20-8"><a href="#annotated-cell-20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(title, row_chunk) <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="14">14</button><span id="annotated-cell-20-9" class="code-annotation-target"><a href="#annotated-cell-20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">section =</span> <span class="fu">str_c</span>(text, <span class="at">collapse =</span> <span class="st">" "</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="15">15</button><span id="annotated-cell-20-10" class="code-annotation-target"><a href="#annotated-cell-20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(document, title, row_chunk, <span class="at">sep =</span> <span class="st">"_"</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-20-11"><a href="#annotated-cell-20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(document, section)</span>
<span id="annotated-cell-20-12"><a href="#annotated-cell-20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-20-13"><a href="#annotated-cell-20-13" aria-hidden="true" tabindex="-1"></a>by_section</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-20" data-target-annotation="9">9</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="2" data-code-annotation="9">Remove row with empty strings</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="10">10</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="3" data-code-annotation="10">Remove all digits from our raw <code>text</code> column</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="11">11</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="4" data-code-annotation="11">Count number of words per row</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="12">12</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="6" data-code-annotation="12">Calculate cumulative word count per book</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="13">13</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="7" data-code-annotation="13">Creates a <code>row_chunk</code> index that groups observations of ~ 2000 words together</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="14">14</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="9" data-code-annotation="14">Combines the <code>row_chunk</code> indices together so each book section is about the same length</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="15">15</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="10" data-code-annotation="15">Combines <code>title</code> and <code>row_chunk</code> into a new variable called <code>document</code>, separated by <code>_</code></span>
</dd>
</dl>
</div>
</div>

</section>
<section id="divide-each-book-into-sections-output" class="slide level2 output-location-slide"><h2>Divide Each Book into Sections</h2><div class="cell output-location-slide">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 112 × 2
#&gt;    document                  section                                            
#&gt;    &lt;chr&gt;                     &lt;chr&gt;                                              
#&gt;  1 The Communist Manifesto_1 "The Communist Manifesto by Karl Marx and Friedric…
#&gt;  2 The Communist Manifesto_2 "powers of the nether world whom he has called up …
#&gt;  3 The Communist Manifesto_3 "the bourgeois family-relations; modern industrial…
#&gt;  4 The Communist Manifesto_4 "abolition of bourgeois property, the standard of …
#&gt;  5 The Communist Manifesto_5 "and deserted with loud and irreverent laughter. O…
#&gt;  6 The Communist Manifesto_6 "Bourgeois Socialism attains adequate expression, …
#&gt;  7 The Red Record_1          "The Red Record: Tabulated Statistics and Alleged …
#&gt;  8 The Red Record_2          "describe as such? Not by any means. With the Sout…
#&gt;  9 The Red Record_3          "Va.; Nov. , Samuel Motlow, Lynchburg, Va.; Nov. ,…
#&gt; 10 The Red Record_4          "  Ford was greatly hurt and the Negro was held to…
#&gt; # ℹ 102 more rows</code></pre>
</div>
</div></section><section id="create-our-tidy-text-dataset" class="slide level2">
<h2>Create our Tidy Text Dataset</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a aria-hidden="true" tabindex="-1"></a>by_section_word <span class="ot">&lt;-</span> by_section <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, section)</span>
<span id="cb61-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a aria-hidden="true" tabindex="-1"></a>by_section_word</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 221,458 × 2
#&gt;    document                  word     
#&gt;    &lt;chr&gt;                     &lt;chr&gt;    
#&gt;  1 The Communist Manifesto_1 the      
#&gt;  2 The Communist Manifesto_1 communist
#&gt;  3 The Communist Manifesto_1 manifesto
#&gt;  4 The Communist Manifesto_1 by       
#&gt;  5 The Communist Manifesto_1 karl     
#&gt;  6 The Communist Manifesto_1 marx     
#&gt;  7 The Communist Manifesto_1 and      
#&gt;  8 The Communist Manifesto_1 friedrich
#&gt;  9 The Communist Manifesto_1 engels   
#&gt; 10 The Communist Manifesto_1 from     
#&gt; # ℹ 221,448 more rows</code></pre>
</div>
</div>
</section>
<section id="find-document-word-counts" class="slide level2">
<h2>Find Document-Word Counts</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a aria-hidden="true" tabindex="-1"></a>word_counts <span class="ot">&lt;-</span> by_section_word <span class="sc">|&gt;</span> </span>
<span id="cb63-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">|&gt;</span> </span>
<span id="cb63-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(document, word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb63-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a aria-hidden="true" tabindex="-1"></a>word_counts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 56,260 × 3
#&gt;    document                           word         n
#&gt;    &lt;chr&gt;                              &lt;chr&gt;    &lt;int&gt;
#&gt;  1 The Theory of the Leisure Class_43 class       41
#&gt;  2 The Theory of the Leisure Class_45 class       37
#&gt;  3 The Souls of Black Folk_26         negro       34
#&gt;  4 The Theory of the Leisure Class_26 life        34
#&gt;  5 The Communist Manifesto_3          property    33
#&gt;  6 The Red Record_12                  white       33
#&gt;  7 The Theory of the Leisure Class_1  class       32
#&gt;  8 The Theory of the Leisure Class_51 class       32
#&gt;  9 The Red Record_1                   white       31
#&gt; 10 The Theory of the Leisure Class_33 class       31
#&gt; # ℹ 56,250 more rows</code></pre>
</div>
</div>
</section>
<section id="section-12" class="slide level2" data-background-image="https://media.wired.com/photos/5ca648a330f00e47fd82ae77/master/w_2240,c_limit/Culture_Matrix_Code_corridor.jpg" data-background-size="cover" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="position: absolute; bottom:150px; left:175px; font-size: 0em; color:#e93cac">
<p>Back into the matrix…</p>
</div>
</section>
<section id="section-13" class="slide level2" data-background-image="https://media.wired.com/photos/5ca648a330f00e47fd82ae77/master/w_2240,c_limit/Culture_Matrix_Code_corridor.jpg" data-background-size="cover" data-auto-animate="true">
<h2 data-id="quarto-animate-title"></h2>
<div style="position: absolute; bottom:150px; left:175px; font-size: 2.5em; color:#e93cac">
<p>Back into the matrix…</p>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a aria-hidden="true" tabindex="-1"></a>sections_dtm <span class="ot">&lt;-</span> word_counts <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">cast_dtm</span>(document, word, n)</span>
<span id="cb65-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a aria-hidden="true" tabindex="-1"></a>sections_dtm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; &lt;&lt;DocumentTermMatrix (documents: 112, terms: 13844)&gt;&gt;
#&gt; Non-/sparse entries: 56260/1494268
#&gt; Sparsity           : 96%
#&gt; Maximal term length: 19
#&gt; Weighting          : term frequency (tf)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a aria-hidden="true" tabindex="-1"></a>sections_lda <span class="ot">&lt;-</span> <span class="fu">LDA</span>(sections_dtm, <span class="at">k =</span> <span class="dv">4</span>, <span class="at">control =</span> <span class="fu">list</span>(<span class="at">seed =</span> <span class="dv">01302025</span>))</span>
<span id="cb67-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a aria-hidden="true" tabindex="-1"></a>sections_lda</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; A LDA_VEM topic model with 4 topics.</code></pre>
</div>
</div>
</section>
<section id="visualize-top-terms" class="slide level2">
<h2>Visualize Top Terms</h2>
<div class="panel-tabset">
<ul id="tabset-11" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-11-1">Beta Matrix</a></li><li><a href="#tabset-11-2"><span style="color:#aadb1e">Code</span></a></li><li><a href="#tabset-11-3"><span style="color:#aadb1e">Bar Chart</span></a></li></ul>
<div class="tab-content">
<div id="tabset-11-1">
<div class="cell fig-column-page">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a aria-hidden="true" tabindex="-1"></a>sections_topics <span class="ot">&lt;-</span> <span class="fu">tidy</span>(sections_lda, <span class="at">matrix =</span> <span class="st">"beta"</span>)</span>
<span id="cb69-2"><a aria-hidden="true" tabindex="-1"></a>sections_topics <span class="sc">|&gt;</span> </span>
<span id="cb69-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>beta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 55,376 × 3
#&gt;    topic term        beta
#&gt;    &lt;int&gt; &lt;chr&gt;      &lt;dbl&gt;
#&gt;  1     2 class    0.0216 
#&gt;  2     2 leisure  0.0163 
#&gt;  3     1 life     0.0161 
#&gt;  4     2 life     0.0127 
#&gt;  5     3 negro    0.0110 
#&gt;  6     3 white    0.00946
#&gt;  7     4 life     0.00904
#&gt;  8     1 class    0.00884
#&gt;  9     2 economic 0.00795
#&gt; 10     3 black    0.00774
#&gt; # ℹ 55,366 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-11-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a aria-hidden="true" tabindex="-1"></a>top_terms <span class="ot">&lt;-</span> sections_topics <span class="sc">|&gt;</span> </span>
<span id="cb71-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">|&gt;</span> </span>
<span id="cb71-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(beta, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb71-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb71-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(topic, <span class="sc">-</span>beta)</span>
<span id="cb71-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a aria-hidden="true" tabindex="-1"></a>top_terms <span class="sc">|&gt;</span> </span>
<span id="cb71-8"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">reorder_within</span>(term, beta, topic)) <span class="sc">|&gt;</span> </span>
<span id="cb71-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(beta, term, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb71-10"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb71-11"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> observable[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]) <span class="sc">+</span></span>
<span id="cb71-12"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb71-13"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reordered</span>() <span class="sc">+</span> </span>
<span id="cb71-14"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-11-3">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-84-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="per-document-classification" class="slide level2">
<h2>Per-document classification</h2>
<div class="panel-tabset">
<ul id="tabset-12" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-12-1">Gamma Matrix</a></li><li><a href="#tabset-12-2"><span style="color:#2ad2c9">Code</span></a></li><li><a href="#tabset-12-3"><span style="color:#2ad2c9">Boxplot</span></a></li></ul>
<div class="tab-content">
<div id="tabset-12-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a aria-hidden="true" tabindex="-1"></a>sections_gamma <span class="ot">&lt;-</span> <span class="fu">tidy</span>(sections_lda, <span class="at">matrix =</span> <span class="st">"gamma"</span>)</span>
<span id="cb72-2"><a aria-hidden="true" tabindex="-1"></a>sections_gamma</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 448 × 3
#&gt;    document                           topic     gamma
#&gt;    &lt;chr&gt;                              &lt;int&gt;     &lt;dbl&gt;
#&gt;  1 The Theory of the Leisure Class_43     1 0.0000349
#&gt;  2 The Theory of the Leisure Class_45     1 0.0000349
#&gt;  3 The Souls of Black Folk_26             1 0.0000320
#&gt;  4 The Theory of the Leisure Class_26     1 1.00     
#&gt;  5 The Communist Manifesto_3              1 1.00     
#&gt;  6 The Red Record_12                      1 0.0000343
#&gt;  7 The Theory of the Leisure Class_1      1 0.0000347
#&gt;  8 The Theory of the Leisure Class_51     1 0.0000372
#&gt;  9 The Red Record_1                       1 0.0000351
#&gt; 10 The Theory of the Leisure Class_33     1 0.799    
#&gt; # ℹ 438 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-12-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a aria-hidden="true" tabindex="-1"></a>sections_gamma <span class="ot">&lt;-</span> sections_gamma <span class="sc">|&gt;</span> </span>
<span id="cb74-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(document, <span class="fu">c</span>(<span class="st">"title"</span>, <span class="st">"section"</span>), <span class="at">sep =</span> <span class="st">"_"</span>, <span class="at">convert =</span> <span class="cn">TRUE</span>)</span>
<span id="cb74-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-4"><a aria-hidden="true" tabindex="-1"></a>sections_gamma <span class="sc">|&gt;</span> </span>
<span id="cb74-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title =</span> <span class="fu">reorder</span>(title, gamma <span class="sc">*</span> topic)) <span class="sc">|&gt;</span> </span>
<span id="cb74-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">factor</span>(topic), gamma, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb74-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb74-8"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> observable[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]) <span class="sc">+</span></span>
<span id="cb74-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> title) <span class="sc">+</span></span>
<span id="cb74-10"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"topic"</span>, <span class="at">y =</span> <span class="fu">expression</span>(gamma)) <span class="sc">+</span> </span>
<span id="cb74-11"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-12-3">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-87-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-classifications" class="slide level2">
<h2>Section Classifications</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a aria-hidden="true" tabindex="-1"></a>section_classifications <span class="ot">&lt;-</span> sections_gamma <span class="sc">|&gt;</span> </span>
<span id="cb75-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(title, section) <span class="sc">|&gt;</span> </span>
<span id="cb75-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(gamma) <span class="sc">|&gt;</span> </span>
<span id="cb75-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb75-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-6"><a aria-hidden="true" tabindex="-1"></a>section_classifications</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 112 × 4
#&gt;    title                   section topic gamma
#&gt;    &lt;chr&gt;                     &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
#&gt;  1 The Communist Manifesto       1     4 1.00 
#&gt;  2 The Communist Manifesto       2     2 1.00 
#&gt;  3 The Communist Manifesto       3     1 1.00 
#&gt;  4 The Communist Manifesto       4     4 0.771
#&gt;  5 The Communist Manifesto       5     2 0.967
#&gt;  6 The Communist Manifesto       6     2 1.00 
#&gt;  7 The Red Record                1     3 1.00 
#&gt;  8 The Red Record                2     3 1.00 
#&gt;  9 The Red Record                3     3 0.727
#&gt; 10 The Red Record                4     1 0.646
#&gt; # ℹ 102 more rows</code></pre>
</div>
</div>
</section>
<section id="book-topic-consensus" class="slide level2">
<h2>Book-Topic Consensus</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a aria-hidden="true" tabindex="-1"></a>book_topics <span class="ot">&lt;-</span> section_classifications <span class="sc">|&gt;</span> </span>
<span id="cb77-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(title, topic) <span class="sc">|&gt;</span> </span>
<span id="cb77-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(title) <span class="sc">|&gt;</span> </span>
<span id="cb77-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb77-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb77-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(<span class="at">consensus =</span> title, topic)</span>
<span id="cb77-7"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-8"><a aria-hidden="true" tabindex="-1"></a>book_topics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4 × 2
#&gt;   consensus                       topic
#&gt;   &lt;chr&gt;                           &lt;int&gt;
#&gt; 1 The Communist Manifesto             2
#&gt; 2 The Red Record                      3
#&gt; 3 The Souls of Black Folk             3
#&gt; 4 The Theory of the Leisure Class     2</code></pre>
</div>
</div>
</section>
<section id="incorrect-predictions-by-section" class="slide level2">
<h2>Incorrect Predictions by Section</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a aria-hidden="true" tabindex="-1"></a>section_classifications <span class="sc">|&gt;</span> </span>
<span id="cb79-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(book_topics, <span class="at">by =</span> <span class="st">"topic"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb79-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(title <span class="sc">!=</span> consensus) <span class="sc">|&gt;</span> </span>
<span id="cb79-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(title, consensus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4 × 3
#&gt;   title                           consensus                           n
#&gt;   &lt;chr&gt;                           &lt;chr&gt;                           &lt;int&gt;
#&gt; 1 The Communist Manifesto         The Theory of the Leisure Class     3
#&gt; 2 The Red Record                  The Souls of Black Folk            13
#&gt; 3 The Souls of Black Folk         The Red Record                     35
#&gt; 4 The Theory of the Leisure Class The Communist Manifesto            27</code></pre>
</div>
</div>
</section>
<section id="incorrect-predictions-by-word" class="slide level2">
<h2>Incorrect Predictions by Word</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-28"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-28-1"><a href="#annotated-cell-28-1" aria-hidden="true" tabindex="-1"></a>assignments <span class="ot">&lt;-</span> broom<span class="sc">::</span><span class="fu">augment</span>(sections_lda, </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-28" data-target-annotation="16">16</button><span id="annotated-cell-28-2" class="code-annotation-target"><a href="#annotated-cell-28-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">data =</span> sections_dtm)</span>
<span id="annotated-cell-28-3"><a href="#annotated-cell-28-3" aria-hidden="true" tabindex="-1"></a>assignments</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-28" data-target-annotation="16">16</dt>
<dd>
<span data-code-cell="annotated-cell-28" data-code-lines="2" data-code-annotation="16">Takes our model and appends information to each observation in the original data</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 56,260 × 4
#&gt;    document                           term  count .topic
#&gt;    &lt;chr&gt;                              &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;
#&gt;  1 The Theory of the Leisure Class_43 class    41      2
#&gt;  2 The Theory of the Leisure Class_45 class    37      2
#&gt;  3 The Souls of Black Folk_26         class     1      2
#&gt;  4 The Theory of the Leisure Class_26 class     4      1
#&gt;  5 The Communist Manifesto_3          class    16      1
#&gt;  6 The Theory of the Leisure Class_1  class    32      2
#&gt;  7 The Theory of the Leisure Class_51 class    32      2
#&gt;  8 The Theory of the Leisure Class_33 class    31      1
#&gt;  9 The Theory of the Leisure Class_28 class    30      2
#&gt; 10 The Theory of the Leisure Class_30 class     5      1
#&gt; # ℹ 56,250 more rows</code></pre>
</div>
</div>
</section>
<section id="incorrect-predictions-by-word-1" class="slide level2">
<h2>Incorrect Predictions by Word</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-29"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-29" data-target-annotation="17">17</button><span id="annotated-cell-29-1" class="code-annotation-target"><a href="#annotated-cell-29-1" aria-hidden="true" tabindex="-1"></a>assignments <span class="ot">&lt;-</span> assignments <span class="sc">|&gt;</span></span>
<span id="annotated-cell-29-2"><a href="#annotated-cell-29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(document, <span class="fu">c</span>(<span class="st">"title"</span>, <span class="st">"section"</span>),</span>
<span id="annotated-cell-29-3"><a href="#annotated-cell-29-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">"_"</span>, <span class="at">convert =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-29-4"><a href="#annotated-cell-29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(book_topics,</span>
<span id="annotated-cell-29-5"><a href="#annotated-cell-29-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">".topic"</span> <span class="ot">=</span> <span class="st">"topic"</span>))</span>
<span id="annotated-cell-29-6"><a href="#annotated-cell-29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-29-7"><a href="#annotated-cell-29-7" aria-hidden="true" tabindex="-1"></a>assignments</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-29" data-target-annotation="17">17</dt>
<dd>
<span data-code-cell="annotated-cell-29" data-code-lines="1,2,3,4,5" data-code-annotation="17">Now we can combine these data with <code>book_topics</code> to see which words were incorrectly classified</span>
</dd>
</dl>
</div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 80,430 × 6
#&gt;    title                           section term  count .topic consensus         
#&gt;    &lt;chr&gt;                             &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;             
#&gt;  1 The Theory of the Leisure Class      43 class    41      2 The Communist Man…
#&gt;  2 The Theory of the Leisure Class      43 class    41      2 The Theory of the…
#&gt;  3 The Theory of the Leisure Class      45 class    37      2 The Communist Man…
#&gt;  4 The Theory of the Leisure Class      45 class    37      2 The Theory of the…
#&gt;  5 The Souls of Black Folk              26 class     1      2 The Communist Man…
#&gt;  6 The Souls of Black Folk              26 class     1      2 The Theory of the…
#&gt;  7 The Theory of the Leisure Class       1 class    32      2 The Communist Man…
#&gt;  8 The Theory of the Leisure Class       1 class    32      2 The Theory of the…
#&gt;  9 The Theory of the Leisure Class      51 class    32      2 The Communist Man…
#&gt; 10 The Theory of the Leisure Class      51 class    32      2 The Theory of the…
#&gt; # ℹ 80,420 more rows</code></pre>
</div>
</div>
</section>
<section id="confusion-matrix" class="slide level2">
<h2>Confusion Matrix</h2>
<div class="panel-tabset">
<ul id="tabset-13" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-13-1">Code</a></li><li><a href="#tabset-13-2">Visualization</a></li></ul>
<div class="tab-content">
<div id="tabset-13-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb83-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a aria-hidden="true" tabindex="-1"></a>assignments <span class="sc">|&gt;</span> </span>
<span id="cb83-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(title, consensus, <span class="at">wt =</span> count) <span class="sc">|&gt;</span> </span>
<span id="cb83-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(title, consensus), <span class="sc">~</span><span class="fu">str_wrap</span>(., <span class="dv">20</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb83-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(title) <span class="sc">|&gt;</span> </span>
<span id="cb83-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb83-8"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(consensus, title, <span class="at">fill =</span> percent)) <span class="sc">+</span></span>
<span id="cb83-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb83-10"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">high =</span> observable_light[<span class="dv">4</span>], <span class="at">label =</span> <span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb83-11"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="cb83-12"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb83-13"><a aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb83-14"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Book words were assigned to"</span>,</span>
<span id="cb83-15"><a aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Book words came from"</span>,</span>
<span id="cb83-16"><a aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"% of assignments"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-13-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-94-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="two-topic-model" class="slide level2">
<h2>Two-Topic Model?</h2>
<div class="panel-tabset">
<ul id="tabset-14" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-14-1">Top Terms</a></li><li><a href="#tabset-14-2">Per-Doc Classification</a></li><li><a href="#tabset-14-3">Assignment Confusion Matrix</a></li></ul>
<div class="tab-content">
<div id="tabset-14-1">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-96-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-14-2">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-97-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-14-3">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="text_analysis_files/figure-revealjs/unnamed-chunk-98-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="further-learning-resources" class="title-slide slide level1 center" data-background-color="#c5b4e3">
<h1>Further Learning &amp; Resources</h1>

</section>
<section id="methods-and-implementation" class="slide level2">
<h2>Methods and Implementation</h2>
<div>
<ul>
<li class="fragment"><a href="https://www.tidytextmining.com/">Text Mining in R</a> by Julia Silge &amp; David Robinson</li>
<li class="fragment"><a href="https://smltar.com/">Supervised Machine Learning for Text Analysis in R</a> by Emil Hvitfeldt &amp; Julia Silge</li>
<li class="fragment">Julia Silge’s <a href="https://juliasilge.com/blog/">blog</a></li>
<li class="fragment"><a href="https://press.princeton.edu/books/paperback/9780691207551/text-as-data?srsltid=AfmBOopDzI9FRYzSe3EWqUK_-ekew8aa9SMMQdPu3I4C_BY4OBoVzUOF">Text as Data</a> by Justin Grimmer, Brandon M. Stewart, and Margaret E. Roberts
<ul>
<li class="fragment"><a href="https://joeornstein.github.io/text-as-data/">Companion course in R</a> by Joe Ornstein</li>
</ul></li>
<li class="fragment">Michael Clark’s <a href="https://m-clark.github.io/text-analysis-with-R/">Text Analysis Tutorial</a></li>
</ul>
</div>
</section>
<section id="uw-computing-resources" class="slide level2">
<h2>UW Computing Resources</h2>
<div>
<ul>
<li class="fragment">CSDE Computing <a href="https://csde.washington.edu/computing/accounts/">account</a>
<ul>
<li class="fragment">CSDE <a href="https://csde.washington.edu/computing/resources/">SIM cluster</a></li>
</ul></li>
<li class="fragment"><a href="https://depts.washington.edu/uwrcc/">Research Computing Club</a> (RCC) @ UW
<ul>
<li class="fragment"><a href="https://depts.washington.edu/uwrcc/hyak/">Hyak</a> - High Performance Computing (HPC)
<ul>
<li class="fragment">More about Hyak can be found <a href="https://hyak.uw.edu/docs">here</a></li>
</ul></li>
<li class="fragment"><a href="https://depts.washington.edu/uwrcc/cloud/">Cloud Credit Program</a></li>
</ul></li>
</ul>
</div>
</section></section>
<section id="thanks" class="title-slide slide level1 center" data-background-color="#c5b4e3">
<h1>Thanks!</h1>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section>


    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
              // default icon
              link.classList.add("external");
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
          let selectedAnnoteEl;
          const selectorForAnnotation = ( cell, annotation) => {
            let cellAttr = 'data-code-cell="' + cell + '"';
            let lineAttr = 'data-code-annotation="' +  annotation + '"';
            const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
            return selector;
          }
          const selectCodeLines = (annoteEl) => {
            const doc = window.document;
            const targetCell = annoteEl.getAttribute("data-target-cell");
            const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
            const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
            const lines = annoteSpan.getAttribute("data-code-lines").split(",");
            const lineIds = lines.map((line) => {
              return targetCell + "-" + line;
            })
            let top = null;
            let height = null;
            let parent = null;
            if (lineIds.length > 0) {
                //compute the position of the single el (top and bottom and make a div)
                const el = window.document.getElementById(lineIds[0]);
                top = el.offsetTop;
                height = el.offsetHeight;
                parent = el.parentElement.parentElement;
              if (lineIds.length > 1) {
                const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                height = bottom - top;
              }
              if (top !== null && height !== null && parent !== null) {
                // cook up a div (if necessary) and position it 
                let div = window.document.getElementById("code-annotation-line-highlight");
                if (div === null) {
                  div = window.document.createElement("div");
                  div.setAttribute("id", "code-annotation-line-highlight");
                  div.style.position = 'absolute';
                  parent.appendChild(div);
                }
                div.style.top = top - 2 + "px";
                div.style.height = height + 4 + "px";
                div.style.left = 0;
                let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                if (gutterDiv === null) {
                  gutterDiv = window.document.createElement("div");
                  gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                  gutterDiv.style.position = 'absolute';
                  const codeCell = window.document.getElementById(targetCell);
                  const gutter = codeCell.querySelector('.code-annotation-gutter');
                  gutter.appendChild(gutterDiv);
                }
                gutterDiv.style.top = top - 2 + "px";
                gutterDiv.style.height = height + 4 + "px";
              }
              selectedAnnoteEl = annoteEl;
            }
          };
          const unselectCodeLines = () => {
            const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
            elementsIds.forEach((elId) => {
              const div = window.document.getElementById(elId);
              if (div) {
                div.remove();
              }
            });
            selectedAnnoteEl = undefined;
          };
            // Handle positioning of the toggle
        window.addEventListener(
          "resize",
          throttle(() => {
            elRect = undefined;
            if (selectedAnnoteEl) {
              selectCodeLines(selectedAnnoteEl);
            }
          }, 10)
        );
        function throttle(fn, ms) {
        let throttle = false;
        let timer;
          return (...args) => {
            if(!throttle) { // first call gets through
                fn.apply(this, args);
                throttle = true;
            } else { // all the others get throttled
                if(timer) clearTimeout(timer); // cancel #2
                timer = setTimeout(() => {
                  fn.apply(this, args);
                  timer = throttle = false;
                }, ms);
            }
          };
        }
          const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
          for (let i=0; i<annoteTargets.length; i++) {
            const annoteTarget = annoteTargets[i];
            const targetCell = annoteTarget.getAttribute("data-target-cell");
            const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
            const contentFn = () => {
              const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
              if (content) {
                const tipContent = content.cloneNode(true);
                tipContent.classList.add("code-annotation-tip-content");
                return tipContent.outerHTML;
              }
            }
            const config = {
              allowHTML: true,
              content: contentFn,
              onShow: (instance) => {
                selectCodeLines(instance.reference);
                instance.reference.classList.add('code-annotation-active');
                window.tippy.hideAll();
              },
              onHide: (instance) => {
                unselectCodeLines();
                instance.reference.classList.remove('code-annotation-active');
              },
              maxWidth: 300,
              delay: [50, 0],
              duration: [200, 0],
              offset: [5, 10],
              arrow: true,
              appendTo: function(el) {
                return el.parentElement.parentElement.parentElement;
              },
              interactive: true,
              interactiveBorder: 10,
              theme: 'light-border',
              placement: 'right',
              popperOptions: {
                modifiers: [
                {
                  name: 'flip',
                  options: {
                    flipVariations: false, // true by default
                    allowedAutoPlacements: ['right'],
                    fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                  },
                },
                {
                  name: 'preventOverflow',
                  options: {
                    mainAxis: false,
                    altAxis: false
                  }
                }
                ]        
              }      
            };
            window.tippy(annoteTarget, config); 
          }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>